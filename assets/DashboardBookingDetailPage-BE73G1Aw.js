import{j as e}from"./particles-CSzCUO-v.js";import{h as w,b as n,L as x}from"./vendor-BFu755QE.js";import{b as h}from"./bookingService-Cehkg5m9.js";import"./index-BzGNHlk_.js";const B=({userRole:l="member"})=>{const{bookingId:d}=w(),[t,k]=n.useState(null),[p,u]=n.useState(!0),[g,b]=n.useState(null),[a,r]=n.useState(null);n.useEffect(()=>{d&&c(d)},[d]);const c=async s=>{try{u(!0);const i=await h.getBooking(s);k(i),b(null)}catch(i){b("Booking tidak ditemukan"),console.error("Error fetching booking:",i)}finally{u(!1)}},j=async s=>{if(t)try{r(s),await h.updateBookingStatus(t.id,{status:s}),await c(t.id)}catch(i){console.error("Error updating booking status:",i),alert("Gagal memperbarui status booking")}finally{r(null)}},f=async()=>{if(t&&confirm("Apakah Anda yakin ingin membatalkan booking ini?"))try{r("cancelled"),await h.cancelBooking(t.id),await c(t.id)}catch(s){console.error("Error cancelling booking:",s),alert("Gagal membatalkan booking")}finally{r(null)}},N=s=>{const m={pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Menunggu Persetujuan"},approved:{bg:"bg-green-100",text:"text-green-800",label:"Disetujui"},rejected:{bg:"bg-red-100",text:"text-red-800",label:"Ditolak"},cancelled:{bg:"bg-gray-100",text:"text-gray-800",label:"Dibatalkan"}}[s];return e.jsx("span",{className:`px-3 py-1 text-sm font-medium ${m.bg} ${m.text} rounded-full`,children:m.label})},o=s=>new Date(s).toLocaleString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});if(p)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-blue"})});if(g||!t)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-400 mb-4",children:g||"Booking tidak ditemukan"}),e.jsx(x,{to:"/dashboard/bookings",className:"inline-block px-4 py-2 bg-accent-blue text-white rounded hover:bg-blue-600 transition-colors",children:"Kembali ke Daftar Booking"})]});const y=l==="admin"||t.status==="pending",v=l==="admin"&&t.status==="pending";return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"mb-8",children:[e.jsx(x,{to:"/dashboard/bookings",className:"text-accent-blue hover:text-blue-400 transition-colors text-sm mb-4 inline-block",children:"â† Kembali ke Daftar Booking"}),e.jsxs("div",{className:"bg-light-navy border border-soft-gray/20 rounded-lg p-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:t.title}),e.jsxs("p",{className:"text-soft-gray",children:["ID Booking: ",t.id]})]}),N(t.status)]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Informasi Booking"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-soft-gray",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 text-accent-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"Ruangan"}),e.jsx("div",{className:"text-sm",children:t.room_name||t.room_id})]})]}),e.jsxs("div",{className:"flex items-center text-soft-gray",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 text-accent-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"Pemesan"}),e.jsx("div",{className:"text-sm",children:t.user_username})]})]}),e.jsxs("div",{className:"flex items-start text-soft-gray",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 text-accent-blue mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"Deskripsi"}),e.jsx("div",{className:"text-sm",children:t.description||"Tidak ada deskripsi"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Waktu & Status"}),e.jsxs("div",{className:"space-y-3 text-sm text-soft-gray",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 text-accent-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"Mulai"}),e.jsx("div",{children:o(t.start_time)})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 text-accent-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"Selesai"}),e.jsx("div",{children:o(t.end_time)})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 text-accent-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"Durasi"}),e.jsxs("div",{children:[Math.round((new Date(t.end_time).getTime()-new Date(t.start_time).getTime())/(1e3*60*60))," jam"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-white",children:"Dibuat:"}),e.jsx("span",{className:"ml-2",children:o(t.created_at)})]}),t.updated_at!==t.created_at&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-white",children:"Diperbarui:"}),e.jsx("span",{className:"ml-2",children:o(t.updated_at)})]})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-soft-gray/20",children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[v&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>j("approved"),disabled:a==="approved",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:a==="approved"?"Memproses...":"Setujui"}),e.jsx("button",{onClick:()=>j("rejected"),disabled:a==="rejected",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",children:a==="rejected"?"Memproses...":"Tolak"})]}),y&&!v&&e.jsx("button",{onClick:f,disabled:a==="cancelled",className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 transition-colors",children:a==="cancelled"?"Membatalkan...":"Batalkan Booking"}),e.jsx(x,{to:"/dashboard/bookings",className:"px-4 py-2 border border-soft-gray text-soft-gray rounded-lg hover:border-accent-blue hover:text-accent-blue transition-colors",children:"Kembali ke Daftar"})]})})]})]})})},S=()=>e.jsx("div",{children:e.jsx(B,{userRole:"admin"})});export{S as default};
