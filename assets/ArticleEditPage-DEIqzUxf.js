import{j as r}from"./particles-CSzCUO-v.js";import{u as b,h as E,b as n}from"./vendor-BFu755QE.js";import{u as y}from"./useQuery-CnrhNLmL.js";import{d as A,c as S,D as v}from"./index-BzGNHlk_.js";import{u as M}from"./useMutation-D7kuVVOc.js";import{x as T,d as j}from"./services-BaVGtfnM.js";import{D as C,A as D}from"./ArticleForm-q9cW1gq1.js";const L=()=>{const u=b(),l=A(),{slug:s=""}=E(),{theme:c}=S(),i=n.useMemo(()=>v[c],[c]),[t,d]=n.useState(C),[p,o]=n.useState(""),{data:a,isLoading:g}=y({queryKey:["article-detail",s],queryFn:()=>j(s),enabled:!!s});n.useEffect(()=>{a&&d({slug:a.slug,title:a.title,content:a.content,published:a.published})},[a]);const m=M({mutationFn:e=>T(e.slug,e.updates),onSuccess:()=>{l.invalidateQueries({queryKey:["articles"]}),l.invalidateQueries({queryKey:["article-detail",s]}),u("/dashboard/articles")},onError:e=>o(e.message||"Gagal mengupdate artikel")}),h=e=>{d(x=>({...x,...e}))},f=e=>{if(e.preventDefault(),o(""),!t.title.trim()||!t.content.trim()){o("Title dan content harus diisi");return}m.mutate({slug:s,updates:{title:t.title,content:t.content,published:t.published}})};return r.jsx("div",{className:"max-w-5xl mx-auto space-y-6",children:g?r.jsx("div",{className:`p-6 rounded-lg text-center ${i.panel.bg} ${i.panel.border}`,children:r.jsx("p",{className:i.panel.textMuted,children:"Memuat data artikel..."})}):r.jsx(D,{palette:i,formState:t,isEditing:!0,isSubmitting:m.isPending,error:p,onChange:h,onSubmit:f,onCancel:()=>u("/dashboard/articles")})})};export{L as default};
