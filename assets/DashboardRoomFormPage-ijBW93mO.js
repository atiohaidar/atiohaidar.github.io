import{j as e}from"./particles-CSzCUO-v.js";import{h as $,u as A,b as u}from"./vendor-BFu755QE.js";import{r as h}from"./roomService-DyUIZVgF.js";import{c as I,b as B,D as U}from"./index-BzGNHlk_.js";const F=({isEdit:t=!1})=>{const{roomId:n}=$(),b=A(),{theme:R}=I(),a=U[R],{showLoader:S,updateLoader:g}=B(),[y,j]=u.useState(!1),[M,v]=u.useState(t),[N,m]=u.useState(null),[r,p]=u.useState({name:"",capacity:1,description:"",available:!0}),D="http://localhost:8787",w=new URL(D),C=w.host,L=w.protocol==="https:";u.useEffect(()=>{t&&n&&T()},[t,n]);const T=async()=>{try{v(!0);const s=await h.getRoom(n);p({name:s.name,capacity:s.capacity,description:s.description||"",available:s.available}),m(null)}catch(s){m("Gagal memuat data ruangan"),console.error("Error fetching room:",s)}finally{v(!1)}},P=async s=>{var i,d,o;s.preventDefault(),j(!0),m(null);const l=performance.now();S({title:t?"Updating Room":"Creating Room",subtitle:t?"Saving changes to database":"Allocating new space",endpoint:t?`/api/rooms/${n}`:"/api/rooms",method:t?"PUT":"POST",serverHost:C,isSecure:L,completeDelay:500});try{if(t&&n){const f={...r,capacity:r.capacity};await h.updateRoom(n,f)}else await h.createRoom(r);const c=Math.round(performance.now()-l);g({status:"success",actualLatency:c,actualStatusCode:200,successMessage:t?"Room updated successfully":"Room created successfully"}),b("/dashboard/rooms")}catch(c){j(!1);const f=Math.round(performance.now()-l),k=((d=(i=c.response)==null?void 0:i.data)==null?void 0:d.message)||"Gagal menyimpan ruangan";g({status:"error",actualLatency:f,actualStatusCode:((o=c.response)==null?void 0:o.status)||500,errorMessage:k}),m(k)}},x=s=>{const{name:l,value:i,type:d}=s.target;if(d==="checkbox"){const o=s.target.checked;p(c=>({...c,[l]:o}))}else p(d==="number"?o=>({...o,[l]:parseInt(i)||0}):o=>({...o,[l]:i}))};return M?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-blue"})}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:`text-3xl font-bold ${a.panel.text} mb-2`,children:t?"Edit Ruangan":"Tambah Ruangan Baru"}),e.jsx("p",{className:a.panel.textMuted,children:t?"Perbarui informasi ruangan yang sudah ada":"Masukkan informasi untuk ruangan baru"})]}),e.jsxs("div",{className:`${a.panel.bg} ${a.panel.border} rounded-lg p-8`,children:[N&&e.jsx("div",{className:`mb-6 p-4 ${a.badges.danger} ${a.panel.border} rounded-lg`,children:e.jsx("div",{className:`text-sm ${a.panel.text}`,children:N})}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a.panel.text} mb-2`,children:"Nama Ruangan *"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:x,required:!0,className:`w-full px-4 py-3 ${a.panel.bg} ${a.panel.border} rounded-lg ${a.panel.text} placeholder-${a.panel.textMuted}/50 focus:outline-none focus:ring-2 focus:ring-accent-blue focus:border-transparent`,placeholder:"Contoh: Meeting Room A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Kapasitas *"}),e.jsx("input",{type:"number",name:"capacity",value:r.capacity,onChange:x,required:!0,min:"1",className:"w-full px-4 py-3 bg-deep-navy border border-soft-gray/20 rounded-lg text-white placeholder-soft-gray/50 focus:outline-none focus:ring-2 focus:ring-accent-blue focus:border-transparent",placeholder:"Jumlah maksimal orang"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Deskripsi"}),e.jsx("textarea",{name:"description",value:r.description,onChange:x,rows:4,className:`w-full px-4 py-3 ${a.panel.bg} ${a.panel.border} rounded-lg ${a.panel.text} placeholder-${a.panel.textMuted}/50 focus:outline-none focus:ring-2 focus:ring-accent-blue focus:border-transparent resize-vertical`,placeholder:"Deskripsi fasilitas atau informasi tambahan tentang ruangan"})]}),e.jsxs("div",{className:`flex items-center justify-between p-4 ${a.panel.bg} ${a.panel.border} rounded-lg`,children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${a.panel.text}`,children:"Status Ketersediaan"}),e.jsx("p",{className:`text-xs ${a.panel.textMuted} mt-1`,children:"Ruangan yang tidak tersedia tidak dapat di-booking"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"available",checked:r.available,onChange:x,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent-blue/25 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-blue"}),e.jsx("span",{className:`ml-3 text-sm ${a.panel.textMuted}`,children:r.available?"Tersedia":"Tidak Tersedia"})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-6",children:[e.jsx("button",{type:"submit",disabled:y,className:`flex-1 px-6 py-3 ${a.buttons.primary} rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors`,children:y?"Menyimpan...":t?"Perbarui Ruangan":"Simpan Ruangan"}),e.jsx("button",{type:"button",onClick:()=>b("/rooms"),className:`flex-1 px-6 py-3 ${a.buttons.ghost} rounded-lg transition-colors`,children:"Batal"})]})]})]})]})},K=()=>{const{roomId:t}=$(),n=!!t;return e.jsx("div",{children:e.jsx(F,{isEdit:n})})};export{K as default};
