import{j as e}from"./particles-CSzCUO-v.js";import{u as k,f as O,b as l,R,L as M,N as _,O as D}from"./vendor-BFu755QE.js";import{a as E}from"./useApi-aMnoPUty.js";import{b as P,c as I,D as B,C as N}from"./index-BzGNHlk_.js";import{T as U}from"./ThemeToggle-Cc29PLh4.js";import{S as z}from"./SpyTooltip-Bn4cKGvG.js";import{g as F,a as H}from"./apiClient-0gU9eKXL.js";import"./useQuery-CnrhNLmL.js";import"./useMutation-D7kuVVOc.js";import"./services-BaVGtfnM.js";const K="http://localhost:8787",$=new URL(K),Y=$.host,G=$.protocol==="https:",V=[{id:"overview",label:"Ringkasan",icon:"ðŸ“Š",path:"/dashboard"},{id:"tasks",label:"Daftar Tugas",icon:"ðŸ“",path:"/dashboard/tasks"},{id:"chat",label:"Obrolan",icon:"ðŸ’¬",path:"/dashboard/chat"},{id:"rooms",label:"Ruangan",icon:"ðŸ¢",path:"/dashboard/rooms"},{id:"bookings",label:"Pemesanan",icon:"ðŸ“…",path:"/dashboard/bookings"},{id:"forms",label:"Formulir",icon:"ðŸ“‹",path:"/dashboard/forms"},{id:"items",label:"Barang",icon:"ðŸ“¦",path:"/dashboard/items"},{id:"item-borrowings",label:"Peminjaman Barang",icon:"ðŸ”„",path:"/dashboard/item-borrowings"},{id:"tickets",label:"Tiket",icon:"ðŸŽ«",path:"/dashboard/tickets"},{id:"events",label:"Acara",icon:"ðŸŽ‰",path:"/dashboard/events"},{id:"users",label:"Manajemen Pengguna",icon:"ðŸ‘¥",path:"/dashboard/users",adminOnly:!0},{id:"finance",label:"Keuangan",icon:"ðŸ’°",path:"/dashboard/finance",adminOnly:!0},{id:"articles",label:"Artikel",icon:"ðŸ“°",path:"/dashboard/articles"}],W=({user:r,children:d})=>{var y;const h=k(),c=O(),u=E(),{showLoader:b,updateLoader:m,hideLoader:X}=P(),[t,p]=l.useState(!0),[f,n]=l.useState(!1),[g,x]=l.useState(!1),v=R.useRef(null),{theme:s}=I(),o=B[s],S=s==="light"?"text-[#1A2136]":"text-white",A=s==="dark"?"bg-[#121721]/80 backdrop-blur-xl border border-white/5":"bg-white/80 backdrop-blur-xl border border-white/40",T="flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300",L=async()=>{const a=performance.now();b({title:"Keluar",subtitle:"Mengakhiri sesi Anda",endpoint:"/api/auth/logout",method:"POST",serverHost:Y,isSecure:G,completeDelay:500}),await new Promise(C=>setTimeout(C,800));const i=Math.round(performance.now()-a);u(),m({status:"success",actualLatency:i,actualStatusCode:200,successMessage:"Sampai jumpa lagi."}),h("/login",{replace:!0})},j=V.filter(a=>!a.adminOnly||r.role==="admin"),w=a=>a==="/dashboard"?c.pathname===a:c.pathname.startsWith(a);return e.jsxs("div",{className:`min-h-screen flex ${o.appBg} ${S} transition-colors duration-500 overflow-hidden`,children:[e.jsxs("div",{className:"fixed inset-0 z-0 opacity-40 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] rounded-full bg-blue-600/20 blur-[120px] animate-pulse"}),e.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[50%] h-[50%] rounded-full bg-cyan-600/20 blur-[120px] animate-pulse",style:{animationDelay:"2s"}})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>n(!1)}),e.jsxs("aside",{className:`fixed md:relative z-50 flex flex-col transition-all duration-300 ease-spring
                    ${f?"translate-x-0":"-translate-x-full md:translate-x-0"}
                    ${t?"w-72":"w-24"}
                    h-[100dvh] md:h-[calc(100vh-2rem)] md:my-4 md:ml-4
                    rounded-r-3xl md:rounded-3xl shadow-2xl md:shadow-xl
                    ${A}
                    animate-slide-in-left animation-delay-200 opacity-0
                `,children:[e.jsxs("div",{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{ref:v,className:`flex items-center gap-3 relative ${!t&&"md:justify-center w-full"}`,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onClick:()=>x(!g),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-blue-500/20",children:"A"}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ${t?"w-auto opacity-100":"w-0 opacity-0 hidden md:block"}`,children:e.jsx("h2",{className:"text-xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-cyan-400",children:"AtioHaidar"})}),e.jsx(z,{visible:g,title:"SYSTEM",items:[{label:"APP",value:"Dashboard"},{label:"VER",value:"v2.5.0"},{label:"SEC",value:"Encrypted"}],targetRef:v})]}),t&&e.jsx("button",{onClick:()=>p(!1),className:`hidden md:flex w-8 h-8 items-center justify-center rounded-lg hover:bg-white/10 ${o.sidebar.toggleIcon}`,children:"â—€"}),e.jsx("button",{onClick:()=>n(!1),className:`md:hidden text-2xl p-2 relative z-50 rounded-lg hover:bg-white/10 ${o.sidebar.toggleIcon}`,children:"âœ•"})]}),!t&&e.jsx("button",{onClick:()=>p(!0),className:"hidden md:flex w-full items-center justify-center py-2 hover:text-white transition-colors text-gray-400",children:"â–¶"}),e.jsx("div",{className:`mx-4 mb-4 p-4 rounded-2xl ${s==="dark"?"bg-white/5":"bg-black/5"} transition-all`,children:e.jsxs("div",{className:`flex items-center gap-3 ${!t&&"justify-center"}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-gray-700 to-gray-600 flex items-center justify-center text-white font-semibold shadow-md",children:r.name.charAt(0).toUpperCase()}),t&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-semibold text-sm truncate ${o.sidebar.text}`,children:r.name}),e.jsxs("p",{className:`text-xs truncate ${o.sidebar.textMuted}`,children:["@",r.username]})]})]})}),e.jsx("nav",{className:"flex-1 px-4 space-y-2 overflow-y-auto scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent py-2",children:j.map(a=>{const i=w(a.path);return e.jsxs(M,{to:a.path,onClick:()=>n(!1),className:`${T} ${i?"bg-blue-600/10 text-blue-500 border border-blue-500/20 shadow-[0_0_15px_rgba(59,130,246,0.15)]":"text-gray-400 hover:bg-white/5 hover:text-gray-200"} ${t?"justify-start":"justify-center"}`,title:t?void 0:a.label,children:[e.jsx("span",{className:`text-xl ${i?"scale-110 drop-shadow-[0_0_8px_rgba(59,130,246,0.5)]":""} transition-transform`,children:a.icon}),t&&e.jsx("span",{className:"font-medium whitespace-nowrap",children:a.label}),i&&t&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-blue-500 shadow-[0_0_5px_#3b82f6]"})]},a.id)})}),e.jsxs("div",{className:"p-4 space-y-2 mt-auto",children:[e.jsx("div",{className:`${t?"px-2":"flex justify-center"}`,children:e.jsx(U,{})}),e.jsxs("button",{onClick:()=>{n(!1),L()},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all text-red-400 hover:bg-red-500/10 hover:text-red-300 ${!t&&"justify-center"}`,title:t?void 0:"Logout",children:[e.jsx("span",{className:"text-xl",children:"ðŸšª"}),t&&e.jsx("span",{className:"font-medium",children:"Keluar"})]})]})]}),e.jsxs("main",{className:`
                    relative flex-1 flex flex-col 
                    min-h-[100dvh] md:h-[calc(100vh-2rem)] md:my-4 md:mr-4 md:ml-6
                    md:rounded-3xl shadow-2xl overflow-hidden
                    transition-all duration-300
                    ${s==="dark"?"bg-[#0D111A]/60":"bg-[#F3F4F6]/80"}
                    backdrop-blur-sm
                    z-10
                    animate-fade-in-up animation-delay-500 opacity-0
                `,children:[e.jsxs("header",{className:`px-6 py-4 flex items-center justify-between sticky top-0 z-20 backdrop-blur-xl border-b ${s==="dark"?"border-white/5 bg-[#0D111A]/80":"border-gray-200/50 bg-white/60"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>n(!0),className:"md:hidden text-2xl p-2 rounded-lg hover:bg-white/10",children:"â˜°"}),e.jsx("div",{children:e.jsx("h1",{className:`text-xl font-bold tracking-tight ${s==="dark"?"text-white":"text-gray-900"}`,children:((y=j.find(a=>w(a.path)))==null?void 0:y.label)||"Dashboard"})})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{className:`p-2 rounded-full relative ${s==="dark"?"hover:bg-white/10 text-gray-400":"hover:bg-black/5 text-gray-600"}`,children:["ðŸ””",e.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-red-500 border border-[#0D111A]"})]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-600/20 scrollbar-track-transparent p-4 md:p-8",children:d})]})]})},ne=()=>{const r=k(),[d,h]=l.useState(null),[c,u]=l.useState(!0);return l.useEffect(()=>{const b=F(),m=H();if(!b||!m){r("/login",{replace:!0});return}h(m),u(!1)},[r]),c?e.jsx("div",{className:`min-h-screen ${N.BG_PRIMARY} ${N.TEXT_ACCENT} flex items-center justify-center`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-blue mx-auto mb-4"}),e.jsx("p",{children:"Memeriksa sesi pengguna..."})]})}):d?e.jsx(W,{user:d,children:e.jsx(D,{})}):e.jsx(_,{to:"/login",replace:!0})};export{ne as default};
