import{j as e}from"./particles-CSzCUO-v.js";import{h as f,u as j,b as o,L as N}from"./vendor-BFu755QE.js";import{B as T,E as g}from"./services-BaVGtfnM.js";import{C as s}from"./index-BzGNHlk_.js";const C=()=>{const{formId:t}=f(),i=j(),[r,c]=o.useState(null),[n,m]=o.useState([]),[h,l]=o.useState(!0),[d,x]=o.useState(null);o.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{l(!0);const[a,b]=await Promise.all([T(t),g(t)]);c(a),m(b)}catch(a){x("Gagal memuat data"),console.error(a)}finally{l(!1)}},p=a=>{navigator.clipboard.writeText(a),alert("Token berhasil disalin ke clipboard!")};return h?e.jsx("div",{className:"flex justify-center items-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-blue mx-auto mb-4"}),e.jsx("p",{className:s.TEXT_SECONDARY,children:"Memuat data..."})]})}):d||!r?e.jsxs("div",{children:[e.jsx("button",{onClick:()=>i("/dashboard/forms"),className:`${s.TEXT_ACCENT} hover:underline mb-4`,children:"← Kembali ke Formulir"}),e.jsx("div",{className:"bg-red-500 bg-opacity-20 border border-red-500 text-red-500 px-4 py-3 rounded-lg",children:d||"Formulir tidak ditemukan"})]}):e.jsxs("div",{children:[e.jsx("button",{onClick:()=>i("/dashboard/forms"),className:`${s.TEXT_ACCENT} hover:underline mb-4`,children:"← Kembali ke Formulir"}),e.jsxs("div",{className:`${s.BG_SECONDARY} rounded-lg p-6 shadow-md mb-6`,children:[e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${s.TEXT_PRIMARY} mb-2`,children:r.form.title}),r.form.description&&e.jsx("p",{className:`${s.TEXT_SECONDARY} mb-4`,children:r.form.description}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:`text-sm ${s.TEXT_SECONDARY}`,children:"Token:"}),e.jsx("code",{className:`${s.BG_PRIMARY} px-3 py-1 rounded text-sm ${s.TEXT_ACCENT} font-mono`,children:r.form.token}),e.jsx("button",{onClick:()=>p(r.form.token),className:"text-accent-blue hover:text-accent-blue/80 transition-colors",title:"Salin token",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),e.jsxs("div",{className:`text-lg font-semibold ${s.TEXT_PRIMARY}`,children:["Total Respons: ",n.length]})]}),n.length===0?e.jsxs("div",{className:`${s.BG_SECONDARY} rounded-lg p-12 text-center`,children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:`${s.TEXT_SECONDARY}`,children:"Belum ada respons untuk formulir ini"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:`text-xl font-bold ${s.TEXT_PRIMARY} mb-4`,children:"Daftar Respons"}),n.map(a=>e.jsx(N,{to:`/dashboard/forms/${t}/responses/${a.id}`,className:`block ${s.BG_SECONDARY} rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${s.TEXT_PRIMARY}`,children:a.respondent_name||"Anonim"}),e.jsx("p",{className:`text-sm ${s.TEXT_SECONDARY}`,children:a.submitted_at?new Date(a.submitted_at).toLocaleString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Tanggal tidak tersedia"})]}),e.jsx("svg",{className:"w-6 h-6 text-accent-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},a.id))]})]})};export{C as default};
