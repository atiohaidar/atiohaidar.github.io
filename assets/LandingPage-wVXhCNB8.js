import{j as e}from"./particles-CSzCUO-v.js";import{b as a,L as ae,c as K,u as ne}from"./vendor-BFu755QE.js";import{E as re,B as Ne,F as ye,P as ve,G as Te,a as Re,N as we,S as Ee,b as _e}from"./ScrollReveal-DVDuLnJK.js";import{P as X,T as Q,C as t,L as U,S as ee,B as Ae,u as Ce}from"./index-BzGNHlk_.js";import{S as Z}from"./SpyTooltip-Bn4cKGvG.js";import{g as le,a as ie,c as Se}from"./apiClient-0gU9eKXL.js";import{g as te,s as $e,d as Ie}from"./chatService-BORdFYKP.js";import{w as Y}from"./websocketService-CIB_-ktr.js";import{l as Me,s as Pe,g as Be,a as De,b as Oe}from"./services-BaVGtfnM.js";import{P as Ye}from"./ParallaxBackground-ByEXDhwp.js";import{u as Le}from"./useParallax-C7KmvLtK.js";import"./ThemeToggle-Cc29PLh4.js";const H={HERO:{GREETING:200,NAME:400,TAGLINE:600,BIO:800,CTA:1e3}},G=(s,l=0)=>({animation:`fadeInUp 0.5s ease-out ${s}ms forwards`,opacity:l}),J=s=>({href:s,target:"_blank",rel:"noopener noreferrer"}),Xe=({greeting:s,name:l,tagline:n,bio:i,linkedinUrl:r})=>{const x=a.useRef(null),[c,d]=a.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`${X.SHOW} text-center py-4 border-b border-soft-gray/30`,style:G(H.HERO.GREETING),children:[e.jsx("h3",{className:`text-lg ${Q.WEIGHT_SEMIBOLD} ${t.TEXT_WHITE} mb-2`,children:"Portfolio Online"}),e.jsxs("p",{className:`${Q.SMALL_TEXT}`,children:["Portfolio:",e.jsx("a",{className:`${t.TEXT_ACCENT} underline ml-1`,...J("https://atiohaidar.github.io"),children:"https://atiohaidar.github.io ðŸ”—"})]})]}),e.jsx("section",{id:"hero",className:`min-h-screen ${U.FLEX_CENTER} relative overflow-hidden pt-20 pb-0 md:pt-0`,children:e.jsx("div",{className:"container mx-auto px-6 md:px-16 lg:px-20 relative z-10 text-center",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("p",{className:"text-lg md:text-xl font-medium text-accent-blue dark:text-cyan-400 tracking-wide uppercase",style:G(H.HERO.NAME),children:s}),e.jsxs("h1",{className:"text-5xl sm:text-7xl lg:text-8xl font-bold tracking-tight text-light-text dark:text-white mb-4",style:G(H.HERO.TAGLINE),children:[e.jsxs("span",{className:"inline-block relative",children:[l,e.jsx("span",{className:"absolute -bottom-2 left-0 w-full h-2 bg-accent-blue rounded-full opacity-0 animate-fade-in-up animation-delay-500"})]}),e.jsx("span",{className:"text-accent-blue",children:"."})]}),e.jsx("h2",{className:"text-2xl sm:text-4xl lg:text-5xl font-semibold text-light-muted dark:text-slate-300",style:G(H.HERO.BIO),children:n}),e.jsxs("div",{className:`${X.SHOW} pt-2 text-sm`,children:[e.jsxs("p",{children:["Portfolio: ",e.jsx("a",{className:`${t.TEXT_ACCENT} underline`,...J("https://atiohaidar.github.io"),children:"https://atiohaidar.github.io"})]}),e.jsxs("p",{children:["LinkedIn: ",e.jsx("a",{className:`${t.TEXT_ACCENT} underline`,...J(r),children:r})]})]}),e.jsx("p",{className:"max-w-2xl mx-auto text-lg sm:text-xl leading-relaxed text-gray-600 dark:text-slate-400 pt-6",style:G(H.HERO.CTA),children:i}),e.jsxs("div",{className:`pt-10 flex flex-col sm:flex-row gap-4 justify-center ${X.HIDE}`,style:G(1e3),children:[e.jsx("a",{href:"#portfolio",className:"glass-button px-8 py-4 rounded-full text-lg font-medium text-light-text dark:text-white hover:text-accent-blue hover:border-accent-blue/50",children:"Lihat Portofolio"}),e.jsxs("div",{className:"relative",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[e.jsx("a",{ref:x,href:"#backend",className:"block px-8 py-4 rounded-full text-lg font-medium bg-accent-blue text-white shadow-lg shadow-accent-blue/30 hover:bg-accent-blue/90 hover:-translate-y-1 transition-all duration-300",children:"âš¡ Coba Backend"}),e.jsx(Z,{visible:c,title:"BACKEND DEMO",items:[{label:"AKSES",value:"Login sebagai Admin"},{label:"KELOLA",value:"Users, Items, Tasks, Forms"},{label:"FINANCE",value:"Top-up, Transfer, Transaksi"},{label:"BOOKING",value:"Event & Ruangan"},{label:"SUPPORT",value:"Ticketing System"}],targetRef:x,color:"#10b981"})]}),e.jsx("a",{href:"#form-token",className:"px-8 py-4 rounded-full text-lg font-medium border border-gray-300 dark:border-white/20 hover:bg-white/5 hover:border-accent-blue hover:text-accent-blue transition-all duration-300",children:"Akses Form"})]})]})})})]})},oe=(s={threshold:.1},l=0)=>{const[n,i]=a.useState(!1),r=a.useRef(null),x=a.useRef(!1);return a.useEffect(()=>{const c=new IntersectionObserver(([d])=>{d.isIntersecting&&!x.current&&(x.current=!0,l>0?setTimeout(()=>i(!0),l):i(!0),r.current&&c.unobserve(r.current))},s);return r.current&&c.observe(r.current),()=>{r.current&&c.unobserve(r.current)}},[l,s.threshold]),[r,n]},Fe=({data:s})=>{const{description:l,coreValues:n,interests:i}=s,[r,x]=oe({threshold:.1},800),c=x?"animate-fade-in-up":"opacity-0";return e.jsxs("section",{id:"about",ref:r,className:`py-12 container mx-auto px-6 md:px-16 lg:px-20 print:py-4 print:px-4 print-avoid-break ${c}`,children:[e.jsxs("h2",{className:"text-2xl md:text-3xl font-poppins font-bold text-light-text dark:text-white mb-8 flex items-center print:mb-4 print:text-xl",children:[e.jsx("span",{className:"text-light-accent dark:text-accent-blue mr-3 print:mr-2",children:"01."}),"Tentang Saya",e.jsx("span",{className:"h-px w-20 sm:w-40 bg-gray-300 dark:bg-soft-gray/30 ml-4 print:bg-gray-400 print:ml-2 print:w-16"})]}),e.jsx("div",{className:"glass-panel p-8 rounded-3xl",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-12 print:gap-6",children:[e.jsx("div",{className:"md:col-span-3 text-light-muted dark:text-gray-300 space-y-4 leading-relaxed print:text-black print:space-y-2 print:text-sm text-lg",children:l.map((d,p)=>e.jsx("p",{children:d},p))}),e.jsxs("div",{className:"md:col-span-2 space-y-8 print:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-poppins font-semibold text-light-text dark:text-white mb-3 print:text-black print:text-base print:mb-2",children:"ðŸ§© Core Values"}),e.jsx("ul",{className:"space-y-2 list-disc list-inside text-light-muted dark:text-gray-300 print:text-black print:space-y-1 print:text-sm",children:n.map(d=>e.jsxs("li",{children:[e.jsxs("span",{className:"font-semibold text-light-text dark:text-white print:text-black",children:[d.title,":"]})," ",d.description]},d.title))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-poppins font-semibold text-light-text dark:text-white mb-3 print:text-black print:text-base print:mb-2",children:"ðŸŽ¯ Minat & Hobi"}),e.jsx("ul",{className:"space-y-2 list-disc list-inside text-light-muted dark:text-gray-300 print:text-black print:space-y-1 print:text-sm",children:i.map(d=>e.jsxs("li",{children:[e.jsxs("span",{className:"font-semibold text-light-text dark:text-white print:text-black",children:[d.title,":"]})," ",d.description]},d.title))})]})]})]})})]})},z=({id:s,number:l,title:n,children:i,centerTitle:r=!1,className:x="",delay:c=0,printPageBreak:d=!1})=>{const[p,f]=oe({threshold:.1},c),v=f?"animate-fade-in-up":"opacity-0",b=r?"justify-center":"",y=d?X.PAGE_BREAK:X.NO_BREAK;return e.jsxs("section",{id:s,ref:p,className:`${ee.SECTION_PADDING} ${y} ${ee.SECTION_PADDING_PRINT} ${v} ${x}`,children:[e.jsxs("h2",{className:`${Q.HEADING_SECTION} text-light-text dark:text-white mb-8 ${U.FLEX_CENTER} ${b}`,children:[e.jsxs("span",{className:"text-light-accent dark:text-accent-blue mr-3",children:[l,"."]}),n,!r&&e.jsx("span",{className:"h-px w-20 sm:w-40 bg-gray-300 dark:bg-soft-gray/30 ml-4 print:bg-gray-400"})]}),i]})},ce=({children:s,className:l="",spotlightColor:n="rgba(255, 255, 255, 0.15)"})=>{const i=a.useRef(null),[r,x]=a.useState({x:0,y:0}),[c,d]=a.useState(0),p=b=>{if(!i.current)return;const y=i.current.getBoundingClientRect();x({x:b.clientX-y.left,y:b.clientY-y.top})},f=()=>{d(1)},v=()=>{d(0)};return e.jsxs("div",{ref:i,onMouseMove:p,onMouseEnter:f,onMouseLeave:v,className:`relative overflow-hidden ${l}`,children:[e.jsx("div",{className:"pointer-events-none absolute -inset-px opacity-0 transition duration-300",style:{opacity:c,background:`radial-gradient(600px circle at ${r.x}px ${r.y}px, ${n}, transparent 40%)`}}),s]})},de=({children:s,maxTilt:l=15,scale:n=1.02,perspective:i=1e3,speed:r=400,glare:x=!0,glareMaxOpacity:c=.3,className:d=""})=>{const p=a.useRef(null),[f,v]=a.useState(""),[b,y]=a.useState({}),g=w=>{if(!p.current)return;const k=p.current.getBoundingClientRect(),A=k.left+k.width/2,P=k.top+k.height/2,E=w.clientX-A,C=w.clientY-P,I=C/(k.height/2)*-l,S=E/(k.width/2)*l;if(v(`perspective(${i}px) rotateX(${I}deg) rotateY(${S}deg) scale3d(${n}, ${n}, ${n})`),x){const M=(E+k.width/2)/k.width*100,B=(C+k.height/2)/k.height*100;y({background:`radial-gradient(circle at ${M}% ${B}%, rgba(255,255,255,${c}), transparent 60%)`,opacity:1})}},O=()=>{v(""),y({opacity:0})};return e.jsxs("div",{ref:p,className:`relative transform-gpu will-change-transform ${d}`,style:{transform:f,transition:`transform ${r}ms cubic-bezier(0.03, 0.98, 0.52, 0.99)`},onMouseMove:g,onMouseLeave:O,children:[s,x&&e.jsx("div",{className:"absolute inset-0 pointer-events-none rounded-inherit z-10",style:{...b,transition:`opacity ${r}ms ease-out`,borderRadius:"inherit"}})]})},Ge=({item:s})=>{const l=n=>{const i={className:"w-5 h-5 mr-2 flex-shrink-0"};switch(n){case"researchgate":return e.jsx(Ne,{...i});default:return e.jsx(re,{...i})}};return e.jsx(de,{maxTilt:8,scale:1.02,glare:!0,glareMaxOpacity:.15,className:"h-full",children:e.jsx(ce,{className:"bg-white dark:bg-light-navy/50 rounded-2xl shadow-lg border border-gray-200 dark:border-white/5 h-full transition-transform duration-300 group print-avoid-break overflow-hidden",children:e.jsxs("div",{className:"p-6 flex flex-col h-full relative z-10",children:[e.jsxs("main",{className:"flex-grow",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-light-accent dark:text-accent-blue mb-2",children:s.type}),e.jsx("h3",{className:"text-xl font-poppins font-bold text-light-text dark:text-white mb-2 group-hover:text-light-accent dark:group-hover:text-accent-blue transition-colors",children:s.title}),e.jsx("p",{className:"text-sm text-light-muted dark:text-soft-gray mb-2 leading-relaxed",children:s.description}),e.jsxs("p",{className:"text-sm text-light-muted dark:text-soft-gray leading-relaxed",children:[e.jsx("span",{className:"font-semibold text-light-text dark:text-light-slate",children:"Kontribusi:"})," ",s.contribution]})]}),e.jsx("footer",{className:"mt-4 pt-4 border-t border-gray-300 dark:border-soft-gray/20",children:s.links.map(n=>e.jsxs("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-light-muted dark:text-soft-gray hover:text-light-accent dark:hover:text-accent-blue transition-colors duration-300 group/link overflow-hidden mb-1",children:[l(n.type),e.jsx("span",{className:"group-hover/link:underline print:underline",children:n.url.replace(/^https?:\/\//,"")})]},n.url))})]})})})},He=({research:s})=>e.jsx(z,{id:"research",number:"02",title:"Riset/Tulisan",delay:200,printPageBreak:!0,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 print:grid-cols-2 print:gap-6 p-2",children:s.map((l,n)=>e.jsx("div",{className:"h-full",children:e.jsx(Ge,{item:l})},n))})}),Ke=({project:s})=>{const l=n=>{const i={className:"w-5 h-5 mr-2 flex-shrink-0"};switch(n){case"github":return e.jsx(Te,{...i});case"live":return e.jsx(re,{...i});case"postman":return e.jsx(ve,{...i});default:return null}};return e.jsx(de,{maxTilt:8,scale:1.02,glare:!0,glareMaxOpacity:.15,className:"h-full",children:e.jsx(ce,{className:"glass-card h-full rounded-2xl border border-white/10 dark:border-white/5 bg-white/50 dark:bg-slate-900/50 hover:bg-white/60 dark:hover:bg-slate-900/60 transition-colors p-0 overflow-hidden group print:shadow-none print:border print:border-gray-300 print:rounded-none print:bg-transparent print-avoid-break",children:e.jsxs("div",{className:"p-6 flex flex-col h-full relative z-10",children:[e.jsx("header",{className:"flex justify-between items-center mb-4 print:hidden",children:e.jsx(ye,{className:"w-10 h-10 text-accent-blue"})}),e.jsxs("main",{className:"flex-grow",children:[e.jsx("h3",{className:"text-xl font-poppins font-bold text-light-text dark:text-white mb-2 group-hover:text-accent-blue transition-colors print:text-black",children:s.name}),e.jsx("p",{className:"text-sm text-light-muted dark:text-gray-300 mb-2 leading-relaxed",children:s.description}),e.jsxs("p",{className:"text-sm text-light-muted dark:text-gray-300 leading-relaxed",children:[e.jsx("span",{className:"font-semibold text-light-text dark:text-white",children:"Kontribusi:"})," ",s.contribution]})]}),e.jsxs("footer",{className:"mt-4",children:[e.jsx("div",{className:"mb-4 space-y-2",children:s.links.map(n=>e.jsxs("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-light-muted dark:text-gray-300 hover:text-accent-blue transition-colors duration-300 group/link overflow-hidden mb-1",children:[l(n.type),e.jsx("span",{className:"group-hover/link:underline print:underline",children:n.url.replace(/^https?:\/\//,"")})]},n.url))}),s.tech&&e.jsx("ul",{className:"flex flex-wrap gap-x-4 gap-y-2 text-xs text-light-muted dark:text-gray-400 pt-4 border-t border-gray-300 dark:border-white/10",children:s.tech.map(n=>e.jsx("li",{children:n},n))})]})]})})})},Ue=({projects:s})=>e.jsx(z,{id:"portfolio",number:"03",title:"Portofolio",centerTitle:!0,delay:200,printPageBreak:!1,children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 print:grid-cols-2 print:gap-4 p-2",children:s.map((l,n)=>e.jsx("div",{className:"h-full",children:e.jsx(Ke,{project:l})},n))})}),se=({item:s})=>e.jsxs("div",{className:"relative pl-8 sm:pl-12 py-4 group print-avoid-break",children:[e.jsx("div",{className:"absolute left-0 h-full w-px bg-gray-300 dark:bg-soft-gray/30 print:bg-gray-400"}),e.jsx("div",{className:"absolute left-[-5px] top-6 w-3 h-3 rounded-full bg-gray-400 dark:bg-soft-gray group-hover:bg-light-accent dark:group-hover:bg-accent-blue transition-colors print:bg-black"}),e.jsx("p",{className:"text-sm text-light-accent dark:text-accent-blue mb-1 print:text-gray-600",children:s.date}),e.jsx("h3",{className:"text-lg font-poppins font-bold text-light-text dark:text-white print:text-black",children:"title"in s?s.title:s.degree}),e.jsx("p",{className:"text-md text-light-muted dark:text-light-slate mb-2 print:text-gray-800",children:"company"in s?s.company:s.institution}),"description"in s&&e.jsx("p",{className:"text-sm text-light-muted dark:text-soft-gray print:text-gray-700",children:s.description})]}),ze=({experiences:s=[],education:l=[],workInterest:n=[]})=>e.jsx(z,{id:"experience",number:"04",title:"Pengalaman",className:"max-w-3xl",delay:200,printPageBreak:!0,children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-poppins text-light-muted dark:text-light-slate mb-6 print:text-black",children:"Pengalaman Kerja"}),e.jsx("div",{className:"relative",children:s.map((i,r)=>e.jsx(se,{item:i},r))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-poppins text-light-muted dark:text-light-slate mt-12 mb-6 print:text-black",children:"Pendidikan"}),e.jsx("div",{className:"relative",children:l.map((i,r)=>e.jsx(se,{item:i},r))})]})]})}),We=()=>{const[s,l]=a.useState(!1);return a.useEffect(()=>{const n=le(),i=ie();l(!!(n&&i))},[]),e.jsx(z,{id:"backend",number:"05",title:"Backend",className:"bg-light-bg dark:bg-deep-navy transition-colors duration-300",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-6",children:[e.jsx("p",{className:"text-light-muted dark:text-light-slate",children:"Dashboard Backend sekarang berada pada halaman terpisah. Kamu bisa mencoba autentikasi, mengelola todo list, sertaâ€”jika login sebagai adminâ€”mengatur data pengguna secara real-time dari backend Worker."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-left",children:[e.jsxs("div",{className:"bg-white dark:bg-light-navy/40 border border-gray-300 dark:border-soft-gray/20 rounded-xl p-6 space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-light-text dark:text-white",children:"Untuk Semua Pengguna"}),e.jsxs("ul",{className:"text-light-muted dark:text-soft-gray text-sm space-y-2 list-disc list-inside",children:[e.jsx("li",{children:"Mencoba proses login menggunakan kredensial demo"}),e.jsx("li",{children:"Membuat, memfilter, dan menghapus tugas pada todo list"}),e.jsx("li",{children:"Merasakan alur kerja full-stack dari frontend hingga backend"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-light-navy/40 border border-gray-300 dark:border-soft-gray/20 rounded-xl p-6 space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-light-text dark:text-white",children:"Fitur Admin"}),e.jsxs("ul",{className:"text-light-muted dark:text-soft-gray text-sm space-y-2 list-disc list-inside",children:[e.jsx("li",{children:"Membuat akun baru beserta role"}),e.jsx("li",{children:"Memperbarui nama atau password pengguna"}),e.jsx("li",{children:"Menghapus akun yang tidak diperlukan"})]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(ae,{to:s?"/dashboard":"/login",className:`inline-flex items-center justify-center px-6 py-3 rounded-lg font-semibold shadow-lg transition-colors ${t.BG_ACCENT} text-white hover:opacity-90`,children:s?"Buka Dashboard":"Coba Dashboard Sekarang"})})]})})},q={heading:`text-4xl font-poppins font-bold ${t.TEXT_PRIMARY} mb-4 print:text-black print:text-3xl`,description:`${t.TEXT_SECONDARY} leading-relaxed mb-8 print:text-black`,button:`inline-block bg-transparent ${t.TEXT_ACCENT} border ${t.BORDER_ACCENT} rounded px-10 py-4 font-medium ${t.HOVER_ACCENT} transition-colors duration-300 text-lg ${X.HIDE}`,printContainer:`${X.SHOW} text-center mt-4`},qe=/^https?:\/\/(www\.)?linkedin\.com\//i,Ve=s=>{if(!s||typeof s!="string")return!1;try{const l=new URL(s);return["http:","https:"].includes(l.protocol)&&qe.test(s)}catch{return!1}},ue=a.memo(({pitch:s,linkedinUrl:l})=>{const n=a.useMemo(()=>Ve(l)?l:"#",[l]),i=n!=="#";return e.jsxs(z,{id:"contact",number:"05",title:"Apa Selanjutnya?",className:"text-center max-w-2xl",delay:2400,printPageBreak:!1,children:[e.jsx("h3",{className:q.heading,children:"Hubungi Saya"}),e.jsx("p",{className:q.description,children:s}),i&&e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:q.button,"aria-label":"Kunjungi profil LinkedIn saya",children:"LinkedIn"}),e.jsxs("div",{className:q.printContainer,children:[e.jsx("p",{children:"Anda dapat menemukan saya di LinkedIn:"}),e.jsx("p",{className:"font-semibold text-blue-600",children:l})]})]})});ue.displayName="Contact";const Je=()=>{alert(`Tips untuk hasil print/PDF terbaik:

âœ… Warna dan Design:
1. Di dialog print, pastikan "More settings" > "Options" > "Background graphics" dicentang/aktif
2. Atau di Chrome: klik "More settings" > centang "Background graphics"

âœ… Link yang Clickable:
3. Pilih "Save as PDF" untuk mendapatkan PDF dengan link yang bisa diklik
4. Link ke GitHub, LinkedIn, dan project akan tetap berfungsi di PDF!

âœ… Hasil: PDF dengan warna gelap profesional + link yang aktif`)},Qe=()=>{Je(),setTimeout(()=>{window.print()},100)},Ze=()=>{const[s,l]=a.useState(!1),n=a.useRef(null);return e.jsxs("div",{className:`${U.FIXED_BOTTOM_LEFT} ${X.HIDE}`,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[e.jsx("button",{ref:n,onClick:Qe,className:`relative ${t.BG_ACCENT} ${t.TEXT_PRIMARY} w-14 h-14 rounded-full shadow-lg ${U.FLEX_CENTER} hover:bg-white transition-colors duration-300`,"aria-label":"Cetak Portofolio",children:e.jsx(Re,{className:"w-6 h-6"})}),e.jsx(Z,{visible:s,title:"PRINT",items:[{label:"ACTION",value:"Export to PDF"},{label:"TIP",value:"Enable BG Graphics"},{label:"FORMAT",value:"A4 Portrait"}],targetRef:n,color:"#10b981"})]})},me=a.memo(({message:s,isOwnMessage:l,currentUserId:n,onReply:i})=>{var c;const r=d=>new Date(d).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),x=d=>d===n?"Anda":`Anonim-${d.slice(-6)}`;return e.jsx("div",{className:`flex ${l?"justify-end":"justify-start"} mb-2`,children:e.jsxs("div",{className:"flex flex-col max-w-[70%]",children:[e.jsxs("div",{className:`relative p-3 px-4 shadow-sm ${l?"bg-[#1D4ED8] text-white rounded-tl-lg rounded-tr-lg rounded-bl-lg":"bg-[#1f2c34] text-gray-100 rounded-tl-lg rounded-tr-lg rounded-br-lg"}`,children:[e.jsx("div",{className:"text-sm mb-1 opacity-70 font-medium",children:x(s.sender_id)}),s.reply_to_id&&s.reply_content&&e.jsxs("div",{className:`text-xs p-3 mb-3 rounded border-l-4 ${l?"bg-[#1E40AF] border-[#3B82F6]":"bg-[#182229] border-[#3B82F6]"}`,children:[e.jsx("div",{className:"font-medium text-[#60A5FA] mb-1",children:s.reply_sender_id===n?"Anda":`Anonim-${(c=s.reply_sender_id)==null?void 0:c.slice(-6)}`}),e.jsx("div",{className:"truncate opacity-80",children:s.reply_content})]}),e.jsx("div",{className:"break-words text-base leading-relaxed",children:s.content}),e.jsx("div",{className:"flex items-center justify-end gap-2 mt-2",children:e.jsx("span",{className:"text-xs opacity-60",children:r(s.created_at)})})]}),!l&&i&&e.jsx("button",{onClick:()=>i(s),className:"text-xs mt-1 ml-4 text-gray-400 hover:text-[#60A5FA] hover:underline transition-colors",children:"Balas"})]})})});me.displayName="MessageBubble";const xe=a.memo(({onSendMessage:s,replyingTo:l,onCancelReply:n,isConnected:i,currentUserId:r,disabled:x=!1,placeholder:c="Tulis pesan..."})=>{const[d,p]=a.useState(""),f=a.useRef(null);a.useEffect(()=>{l&&f.current&&f.current.focus()},[l]);const v=()=>{const g=d.trim();g&&(s(g,l==null?void 0:l.id),p(""))},b=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),v()),g.key==="Escape"&&l&&n()},y=g=>g===r?"Anda":`Anonim-${g.slice(-6)}`;return e.jsxs("div",{className:"p-4 border-t border-[#2a3942] bg-[#0e1418]",children:[l&&e.jsxs("div",{className:"flex items-start gap-3 mb-3 p-3 bg-[#1a2228] rounded-lg border-l-4 border-[#3B82F6]",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"text-sm font-medium text-[#60A5FA] mb-1",children:["Membalas ",y(l.sender_id)]}),e.jsx("div",{className:"text-sm text-gray-400 truncate",children:l.content})]}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white p-1 transition-colors",title:"Batalkan balasan",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{ref:f,type:"text",value:d,onChange:g=>p(g.target.value),onKeyDown:b,placeholder:c,disabled:x,className:"flex-1 bg-[#1a2228] text-white rounded-full px-5 py-3 focus:outline-none focus:ring-2 focus:ring-[#3B82F6] placeholder-gray-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("button",{onClick:v,disabled:x||!d.trim(),className:"p-3 rounded-full bg-[#3B82F6] text-white hover:bg-[#2563EB] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Kirim pesan",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),!i&&e.jsx("div",{className:"mt-2 text-center text-yellow-400 text-sm",children:"âš ï¸ Tidak terhubung ke server"})]})});xe.displayName="MessageInput";const he=a.memo(({onlineUsers:s,isConnected:l,onClose:n,showCloseButton:i=!0,title:r="Chat Anonim",actions:x})=>e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-[#2a3942] bg-gradient-to-r from-[#1a1f25] to-[#0e1418]",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#3B82F6] to-[#8B5CF6] flex items-center justify-center text-xl shadow-lg",children:"ðŸ’¬"}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-[#0e1418] ${l?"bg-green-500 animate-pulse":"bg-yellow-500"}`,title:l?"Terhubung":"Menghubungkan..."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:r}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx("span",{className:l?"text-green-400":"text-yellow-400",children:l?"â— Online":"â—‹ Menghubungkan..."}),e.jsx("span",{className:"text-gray-500",children:"â€¢"}),e.jsxs("span",{children:[s," pengguna aktif"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x,i&&n&&e.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-white hover:bg-[#1a2228] rounded-full transition-all",title:"Tutup",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}));he.displayName="ChatHeader";const pe=a.memo(({dateLabel:s})=>e.jsx("div",{className:"flex items-center justify-center my-6",children:e.jsx("div",{className:"bg-[#1f2c34] text-gray-300 text-xs px-4 py-2 rounded-full border border-[#2a3942] shadow-sm",children:s})}));pe.displayName="DateSeparator";const et=({isOpen:s,onClose:l})=>{const[n,i]=a.useState([]),[r,x]=a.useState(null),[c,d]=a.useState(""),[p,f]=a.useState(!1),[v,b]=a.useState(null),[y,g]=a.useState(!1),[O,w]=a.useState(!1),[k,A]=a.useState(0),[P,E]=a.useState(!1),[C,I]=a.useState(0),S=a.useRef(null),M=a.useRef(null),B=a.useRef(!1);a.useEffect(()=>{let o=localStorage.getItem("anonymous_sender_id");o||(o=`anon-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("anonymous_sender_id",o)),d(o)},[]);const u=a.useCallback(()=>{const o=M.current;return o?o.scrollHeight-o.scrollTop-o.clientHeight<100:!0},[]),h=a.useCallback(()=>{var o;(o=S.current)==null||o.scrollIntoView({behavior:"smooth"}),w(!1),A(0)},[]),_=a.useCallback(()=>{if(!B.current)return;const o=u();w(!o),o&&A(0)},[u]),j=a.useCallback(()=>{B.current=!0},[]),T=a.useCallback(()=>{setTimeout(()=>{B.current=!1},150)},[]),D=a.useCallback(o=>{g(!0),o.type==="new_message"?(i(m=>m.some(L=>L.id===o.message.id)?m:[...m,o.message]),setTimeout(()=>h(),100)):o.type==="clear_messages"?i([]):(o.type==="connections_update"||o.type==="welcome")&&o.connections&&I(o.connections)},[h]);a.useEffect(()=>{if(s){(async()=>{f(!0),b(null);try{const N=await te();i(N),setTimeout(()=>h(),100)}catch(N){b(N.message||"Failed to load messages")}finally{f(!1)}})(),Y.ensureConnected(),Y.onMessage(D),g(Y.isConnected);const m=M.current;return m&&(m.addEventListener("scroll",_),m.addEventListener("touchstart",j),m.addEventListener("touchend",T),m.addEventListener("mousedown",j),m.addEventListener("mouseup",T)),()=>{Y.offMessage(D),Y.disconnect(),m&&(m.removeEventListener("scroll",_),m.removeEventListener("touchstart",j),m.removeEventListener("touchend",T),m.removeEventListener("mousedown",j),m.removeEventListener("mouseup",T))}}},[s,D,_,j,T,h]);const F=async(o,m)=>{if(!(!o.trim()||!c)){b(null);try{if(Y.isConnected)Y.sendMessage({type:"send_message",sender_id:c,content:o.trim(),reply_to_id:m}),x(null);else{console.log("WebSocket not connected, using REST API fallback");const N={sender_id:c,content:o.trim()};m&&(N.reply_to_id=m),await $e(N),x(null),await W()}}catch(N){b(N.message||"Failed to send message")}}},W=async()=>{f(!0),b(null);try{const o=await te();i(o),setTimeout(()=>h(),100)}catch(o){b(o.message||"Failed to load messages")}finally{f(!1)}},R=o=>{x(o)},$=()=>{x(null)},be=a.useCallback(o=>{const m={};return o.forEach(N=>{const V=new Date(N.created_at).toISOString().split("T")[0];m[V]||(m[V]=[]),m[V].push(N)}),m},[]),fe=a.useCallback(o=>{const m=new Date(o+"T00:00:00"),N=new Date,L=new Date(N);return L.setDate(L.getDate()-1),m.toDateString()===N.toDateString()?"Hari Ini":m.toDateString()===L.toDateString()?"Kemarin":m.toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:m.getFullYear()!==N.getFullYear()?"numeric":void 0})},[]),ke=async()=>{try{f(!0),b(null),await Ie(),i([]),E(!1),Y.isConnected&&Y.sendMessage({type:"clear_messages",sender_id:c,content:"All messages have been cleared"})}catch(o){b(o.message||"Failed to delete messages")}finally{f(!1)}};if(!s)return null;const je=e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{to:"/fullscreen-chat",className:"p-2 rounded-full text-white hover:bg-white/10 transition-colors",title:"Buka fullscreen chat",onClick:()=>{Y.disconnect(),l()},children:"â›¶"}),e.jsx("button",{onClick:()=>E(!0),disabled:p||n.length===0,className:"p-2 rounded-full text-white hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Hapus semua pesan",children:"ðŸ—‘ï¸"}),e.jsx("button",{onClick:W,disabled:p,className:"p-2 rounded-full text-white hover:bg-white/10 transition-colors disabled:opacity-50",title:"Muat ulang pesan",children:p?"âŸ³":"ðŸ”„"})]});return K.createPortal(e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:[e.jsxs("div",{className:"glass-card rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col overflow-hidden border border-gray-200 dark:border-white/10",children:[e.jsx(he,{isConnected:y,onlineUsers:C,onClose:l,actions:je}),e.jsxs("div",{ref:M,className:"flex-1 overflow-y-auto p-4 space-y-2 bg-[#0a1014] relative",children:[v&&e.jsx("div",{className:"bg-red-500 text-white p-3 rounded-lg",children:v}),n.length===0&&!p&&e.jsx("div",{className:"text-center text-gray-400 py-8",children:"Belum ada pesan. Jadilah yang pertama untuk mengatakan sesuatu!"}),n.length>0&&Object.entries(be(n)).sort(([o],[m])=>o.localeCompare(m)).map(([o,m])=>e.jsxs("div",{children:[e.jsx(pe,{dateLabel:fe(o)}),m.sort((N,L)=>new Date(N.created_at).getTime()-new Date(L.created_at).getTime()).map(N=>e.jsx(me,{message:N,currentUserId:c,isOwnMessage:N.sender_id===c,onReply:R},N.id))]},o)),e.jsx("div",{ref:S}),O&&e.jsx("button",{onClick:h,className:"fixed bottom-24 right-6 bg-[#2563EB] hover:bg-[#1D4ED8] text-white rounded-full p-3 shadow-lg transition-all duration-200 z-10",title:"Lihat pesan terbaru",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M7 14l5-5 5 5z"})}),k>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full min-w-[20px] h-5 flex items-center justify-center px-1",children:k>99?"99+":k})]})})]}),e.jsx(xe,{onSendMessage:F,isConnected:y,currentUserId:c,replyingTo:r,onCancelReply:$,disabled:p})]}),P&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm px-4",children:e.jsxs("div",{className:"glass-card relative w-full max-w-md rounded-2xl border border-gray-200 dark:border-white/10 p-6 shadow-2xl",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600","aria-label":"Tutup konfirmasi",children:"âœ•"}),e.jsx("h2",{className:`text-xl font-semibold mb-4 ${t.TEXT_PRIMARY}`,children:"Hapus Semua Pesan?"}),e.jsx("p",{className:`${t.TEXT_SECONDARY} mb-6`,children:"Tindakan ini akan menghapus semua pesan anonim secara permanen. Pesan yang sudah terkirim tidak dapat dikembalikan."}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:`flex-1 px-4 py-3 rounded-lg font-semibold border ${t.BORDER} ${t.TEXT_PRIMARY} hover:bg-black/5 dark:hover:bg-white/10 transition-colors`,children:"Batal"}),e.jsx("button",{type:"button",onClick:ke,disabled:p,className:"flex-1 px-4 py-3 rounded-lg font-semibold bg-red-500 text-white hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Menghapus...":"Ya, Hapus Semua"})]})]})})]}),document.body)},tt=()=>{const[s,l]=a.useState(""),n=ne(),i=r=>{r.preventDefault(),s.trim()&&n(`/form/${s.trim()}`)};return e.jsx("section",{id:"form-token",className:`py-16 md:py-20 ${t.BG_PRIMARY}`,children:e.jsx("div",{className:"container mx-auto px-4 max-w-2xl",children:e.jsxs("div",{className:`${t.BG_SECONDARY} rounded-lg shadow-xl p-8 md:p-12`,children:[e.jsx("h2",{className:`text-3xl md:text-4xl font-bold ${t.TEXT_PRIMARY} mb-4 text-center`,children:"Isi Formulir"}),e.jsx("p",{className:`${t.TEXT_SECONDARY} text-center mb-8`,children:"Masukkan token untuk mengakses dan mengisi formulir"}),e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"token",className:`block ${t.TEXT_PRIMARY} mb-2 font-medium`,children:"Token Formulir"}),e.jsx("input",{type:"text",id:"token",value:s,onChange:r=>l(r.target.value),placeholder:"Masukkan token formulir",className:`w-full px-4 py-3 rounded-lg ${t.BG_PRIMARY} ${t.TEXT_PRIMARY} border ${t.BORDER} focus:outline-none focus:ring-2 focus:ring-accent-blue`,required:!0})]}),e.jsx("button",{type:"submit",className:`w-full ${t.BUTTON_PRIMARY} ${t.TEXT_ON_ACCENT} py-3 px-6 rounded-lg font-semibold hover:opacity-90 transition-opacity`,children:"Akses Formulir"})]})]})})})},st="http://localhost:8787",ge=new URL(st),at=ge.host,nt=ge.protocol==="https:",rt=()=>{const[s,l]=a.useState([]),[n,i]=a.useState({title:"",description:"",category_id:0,priority:"medium",submitter_name:"",submitter_email:"",reference_link:""}),[r,x]=a.useState(!1),[c,d]=a.useState(null),[p,f]=a.useState(!1),[v,b]=a.useState(!1),[y,g]=a.useState("loading"),[O,w]=a.useState(void 0),[k,A]=a.useState(void 0),[P,E]=a.useState(null),[C,I]=a.useState(null),S=a.useRef(0);a.useEffect(()=>{(async()=>{try{const j=await Me();l(j),j.length>0&&i(T=>({...T,category_id:j[0].id}))}catch(j){console.error("Failed to load categories:",j)}})()},[]);const M=async _=>{var j;_.preventDefault(),b(!0),g("loading"),E(null),w(void 0),A(void 0),S.current=performance.now();try{const T=await Pe(n),D=Math.round(performance.now()-S.current);w(D),A(201),I(T.ticket.token),d({success:!0,message:T.message,token:T.ticket.token}),g("success"),i({title:"",description:"",category_id:((j=s[0])==null?void 0:j.id)||0,priority:"medium",submitter_name:"",submitter_email:"",reference_link:""})}catch(T){const D=Math.round(performance.now()-S.current);w(D),A(400);const F=T instanceof Error?T.message:"Failed to submit ticket";E(F),d({success:!1,message:F}),g("error")}finally{x(!1)}},B=()=>{b(!1),y==="success"&&f(!0)},u=()=>{b(!1)},h=_=>{const{name:j,value:T}=_.target;i(D=>({...D,[j]:j==="category_id"?Number(T):T}))};return e.jsxs("section",{id:"ticket-submission",className:`py-16 md:py-20 ${t.BG_PRIMARY}`,children:[v&&K.createPortal(e.jsx(Ae,{status:y,onComplete:B,onDismiss:u,title:"Submitting Ticket",subtitle:"Processing your complaint",successMessage:C?`Ticket created! Token: ${C}`:"Ticket submitted successfully!",errorMessage:P,responseData:C?{token:C}:void 0,endpoint:"/api/tickets/public",method:"POST",actualLatency:O,actualStatusCode:k,serverHost:at,isSecure:nt,completeDelay:800}),document.body),e.jsx("div",{className:"container mx-auto px-4 max-w-3xl",children:e.jsxs("div",{className:`${t.BG_SECONDARY} rounded-lg shadow-xl p-8 md:p-12`,children:[e.jsx("h2",{className:`text-3xl md:text-4xl font-bold ${t.TEXT_PRIMARY} mb-4 text-center`,children:"Ajukan Komplain / Keluhan"}),e.jsx("p",{className:`${t.TEXT_SECONDARY} text-center mb-8`,children:"Sampaikan keluhan atau komplain Anda. Anda akan mendapatkan token untuk melacak status pengaduan."}),c&&!p&&e.jsx("div",{className:`mb-6 p-4 rounded-lg ${c.success?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-100":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-100"}`,children:c.message}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"submitter_name",className:`block ${t.TEXT_PRIMARY} mb-2 font-medium`,children:"Nama (Opsional)"}),e.jsx("input",{type:"text",id:"submitter_name",name:"submitter_name",value:n.submitter_name||"",onChange:h,placeholder:"Nama Anda",className:`w-full px-4 py-3 rounded-lg ${t.BG_PRIMARY} ${t.TEXT_PRIMARY} border ${t.BORDER} focus:outline-none focus:ring-2 focus:ring-accent-blue`})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"submitter_email",className:`block ${t.TEXT_PRIMARY} mb-2 font-medium`,children:"Email (Opsional)"}),e.jsx("input",{type:"email",id:"submitter_email",name:"submitter_email",value:n.submitter_email||"",onChange:h,placeholder:"email@example.com",className:`w-full px-4 py-3 rounded-lg ${t.BG_PRIMARY} ${t.TEXT_PRIMARY} border ${t.BORDER} focus:outline-none focus:ring-2 focus:ring-accent-blue`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"category_id",className:`block ${t.TEXT_PRIMARY} mb-2 font-medium`,children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{id:"category_id",name:"category_id",value:n.category_id,onChange:h,required:!0,className:`w-full px-4 py-3 rounded-lg ${t.BG_PRIMARY} ${t.TEXT_PRIMARY} border ${t.BORDER} focus:outline-none focus:ring-2 focus:ring-accent-blue`,children:s.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"priority",className:`block ${t.TEXT_PRIMARY} mb-2 font-medium`,children:["Prioritas ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"priority",name:"priority",value:n.priority,onChange:h,required:!0,className:`w-full px-4 py-3 rounded-lg ${t.BG_PRIMARY} ${t.TEXT_PRIMARY} border ${t.BORDER} focus:outline-none focus:ring-2 focus:ring-accent-blue`,children:[e.jsx("option",{value:"low",children:"Rendah"}),e.jsx("option",{value:"medium",children:"Sedang"}),e.jsx("option",{value:"high",children:"Tinggi"}),e.jsx("option",{value:"critical",children:"Kritis"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"title",className:`block ${t.TEXT_PRIMARY} mb-2 font-medium`,children:["Judul ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"title",name:"title",value:n.title,onChange:h,placeholder:"Ringkasan singkat keluhan Anda",required:!0,className:`w-full px-4 py-3 rounded-lg ${t.BG_PRIMARY} ${t.TEXT_PRIMARY} border ${t.BORDER} focus:outline-none focus:ring-2 focus:ring-accent-blue`})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:`block ${t.TEXT_PRIMARY} mb-2 font-medium`,children:["Deskripsi Lengkap ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:h,placeholder:"Jelaskan keluhan Anda secara detail...",required:!0,rows:6,className:`w-full px-4 py-3 rounded-lg ${t.BG_PRIMARY} ${t.TEXT_PRIMARY} border ${t.BORDER} focus:outline-none focus:ring-2 focus:ring-accent-blue resize-none`})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reference_link",className:`block ${t.TEXT_PRIMARY} mb-2 font-medium`,children:"Link Referensi (Opsional)"}),e.jsx("input",{type:"url",id:"reference_link",name:"reference_link",value:n.reference_link||"",onChange:h,placeholder:"https://example.com/screenshot atau link terkait",className:`w-full px-4 py-3 rounded-lg ${t.BG_PRIMARY} ${t.TEXT_PRIMARY} border ${t.BORDER} focus:outline-none focus:ring-2 focus:ring-accent-blue`})]}),e.jsx("button",{type:"submit",disabled:r,className:`w-full ${t.BUTTON_PRIMARY} ${t.TEXT_ON_ACCENT} py-3 px-6 rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed`,children:r?"Mengirim...":"Kirim Keluhan"})]})]})}),p&&(c==null?void 0:c.success)&&c.token&&K.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:`${t.BG_SECONDARY} rounded-lg p-8 max-w-md w-full shadow-2xl`,children:[e.jsx("h3",{className:`text-2xl font-bold ${t.TEXT_PRIMARY} mb-4 text-center`,children:"Keluhan Berhasil Dikirim! âœ…"}),e.jsx("p",{className:`${t.TEXT_SECONDARY} mb-4 text-center`,children:"Token pelacakan Anda:"}),e.jsx("div",{className:`${t.BG_PRIMARY} p-4 rounded-lg mb-4 text-center`,children:e.jsx("code",{className:`text-2xl font-mono font-bold ${t.TEXT_ACCENT}`,children:c.token})}),e.jsx("p",{className:`${t.TEXT_SECONDARY} text-sm mb-6 text-center`,children:"Simpan token ini untuk melacak status keluhan Anda di bawah ini."}),e.jsx("button",{onClick:()=>f(!1),className:`w-full ${t.BUTTON_PRIMARY} ${t.TEXT_ON_ACCENT} py-3 px-6 rounded-lg font-semibold hover:opacity-90 transition-opacity`,children:"Tutup"})]})}),document.body)]})},lt=({prefillToken:s,onPrefillConsumed:l})=>{const[n,i]=a.useState(""),[r,x]=a.useState(null),[c,d]=a.useState([]),[p,f]=a.useState(!1),[v,b]=a.useState(null),[y,g]=a.useState(""),[O,w]=a.useState(""),[k,A]=a.useState(!1),P=a.useCallback(async u=>{f(!0),b(null),x(null),d([]);try{const h=await Be(u);x(h);const _=await De(u);d(_)}catch(h){b(h instanceof Error?h.message:"Gagal memuat tiket")}finally{f(!1)}},[]),E=async u=>{u.preventDefault();const h=n.trim();h&&await P(h)};a.useEffect(()=>{if(s&&s.trim()){const u=s.trim();i(u),P(u).finally(()=>{l==null||l()})}},[s,P,l]);const C=async u=>{if(u.preventDefault(),!(!r||!y.trim())){A(!0);try{const h=await Oe(n.trim(),y.trim(),O.trim()||r.submitter_name||"Guest");d([...c,h]),g("")}catch(h){alert(h instanceof Error?h.message:"Gagal menambahkan komentar")}finally{A(!1)}}},I=u=>{switch(u){case"open":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100";case"waiting":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-100";case"solved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100"}},S=u=>{switch(u){case"open":return"Terbuka";case"in_progress":return"Dalam Proses";case"waiting":return"Menunggu";case"solved":return"Selesai";default:return u}},M=u=>{switch(u){case"low":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100";case"medium":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-100";case"critical":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100"}},B=u=>{switch(u){case"low":return"Rendah";case"medium":return"Sedang";case"high":return"Tinggi";case"critical":return"Kritis";default:return u}};return e.jsx("section",{id:"ticket-tracking",className:`py-16 md:py-20 ${t.BG_PRIMARY}`,children:e.jsx("div",{className:"container mx-auto px-4 max-w-4xl",children:e.jsxs("div",{className:`${t.BG_SECONDARY} rounded-lg shadow-xl p-8 md:p-12`,children:[e.jsx("h2",{className:`text-3xl md:text-4xl font-bold ${t.TEXT_PRIMARY} mb-4 text-center`,children:"Lacak Status Keluhan"}),e.jsx("p",{className:`${t.TEXT_SECONDARY} text-center mb-8`,children:"Masukkan token untuk melihat progress dan status keluhan Anda"}),e.jsx("form",{onSubmit:E,className:"space-y-6 mb-8",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"token",className:`block ${t.TEXT_PRIMARY} mb-2 font-medium`,children:"Token Pelacakan"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",id:"token",value:n,onChange:u=>i(u.target.value),placeholder:"Contoh: TKT-ABC12345",className:`flex-1 px-4 py-3 rounded-lg ${t.BG_PRIMARY} ${t.TEXT_PRIMARY} border ${t.BORDER} focus:outline-none focus:ring-2 focus:ring-accent-blue`,required:!0}),e.jsx("button",{type:"submit",disabled:p,className:`${t.BUTTON_PRIMARY} ${t.TEXT_ON_ACCENT} py-3 px-6 rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed`,children:p?"Memuat...":"Lacak"})]})]})}),v&&e.jsx("div",{className:"mb-6 p-4 rounded-lg bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-100",children:v}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${t.BG_PRIMARY} rounded-lg p-6 border ${t.BORDER}`,children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[e.jsx("h3",{className:`text-2xl font-bold ${t.TEXT_PRIMARY}`,children:r.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${I(r.status)}`,children:S(r.status)}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${M(r.priority)}`,children:B(r.priority)})]})]}),e.jsxs("div",{className:`${t.TEXT_SECONDARY} space-y-2 mb-4`,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Kategori:"})," ",r.category_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dibuat:"})," ",new Date(r.created_at||"").toLocaleString("id-ID")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Terakhir diperbarui:"})," ",new Date(r.updated_at||"").toLocaleString("id-ID")]}),r.assigned_to&&e.jsxs("p",{children:[e.jsx("strong",{children:"Ditangani oleh:"})," ",r.assigned_to]})]}),e.jsxs("div",{className:`${t.TEXT_PRIMARY} whitespace-pre-wrap`,children:[e.jsx("strong",{children:"Deskripsi:"}),e.jsx("p",{className:"mt-2",children:r.description})]}),r.reference_link&&e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:r.reference_link,target:"_blank",rel:"noopener noreferrer",className:`${t.TEXT_ACCENT} hover:underline`,children:"ðŸ”— Link Referensi"})})]}),e.jsxs("div",{className:`${t.BG_PRIMARY} rounded-lg p-6 border ${t.BORDER}`,children:[e.jsx("h4",{className:`text-xl font-bold ${t.TEXT_PRIMARY} mb-4`,children:"Riwayat Komunikasi"}),c.length===0?e.jsx("p",{className:`${t.TEXT_SECONDARY} text-center py-4`,children:"Belum ada komentar"}):e.jsx("div",{className:"space-y-4 mb-6",children:c.map(u=>e.jsxs("div",{className:`${t.BG_SECONDARY} rounded-lg p-4 border ${t.BORDER}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:`font-semibold ${t.TEXT_PRIMARY}`,children:[u.commenter_name,e.jsxs("span",{className:`ml-2 text-xs ${t.TEXT_SECONDARY}`,children:["(",u.commenter_type==="user"?"Admin":"Tamu",")"]})]}),e.jsx("span",{className:`text-sm ${t.TEXT_SECONDARY}`,children:new Date(u.created_at||"").toLocaleString("id-ID")})]}),e.jsx("p",{className:`${t.TEXT_PRIMARY} whitespace-pre-wrap`,children:u.comment_text})]},u.id))}),r.status!=="solved"&&e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"commenterName",className:`block ${t.TEXT_PRIMARY} mb-2 font-medium`,children:"Nama Anda (Opsional)"}),e.jsx("input",{type:"text",id:"commenterName",value:O,onChange:u=>w(u.target.value),placeholder:r.submitter_name||"Guest",className:`w-full px-4 py-2 rounded-lg ${t.BG_SECONDARY} ${t.TEXT_PRIMARY} border ${t.BORDER} focus:outline-none focus:ring-2 focus:ring-accent-blue`})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newComment",className:`block ${t.TEXT_PRIMARY} mb-2 font-medium`,children:"Tambahkan Komentar"}),e.jsx("textarea",{id:"newComment",value:y,onChange:u=>g(u.target.value),placeholder:"Tambahkan informasi atau pertanyaan...",required:!0,rows:4,className:`w-full px-4 py-2 rounded-lg ${t.BG_SECONDARY} ${t.TEXT_PRIMARY} border ${t.BORDER} focus:outline-none focus:ring-2 focus:ring-accent-blue resize-none`})]}),e.jsx("button",{type:"submit",disabled:k,className:`${t.BUTTON_PRIMARY} ${t.TEXT_ON_ACCENT} py-2 px-6 rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed`,children:k?"Mengirim...":"Kirim Komentar"})]}),r.status==="solved"&&e.jsx("div",{className:"mt-4 p-4 rounded-lg bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-100 text-center",children:"âœ… Tiket ini telah diselesaikan. Komentar tidak dapat ditambahkan lagi."})]})]})]})})})},kt=()=>{const s=ne(),{data:l,loading:n,error:i}=Ce(),{profile:r,about:x,projects:c,research:d,experiences:p,education:f}=l;Le();const[v,b]=a.useState(null),[y,g]=a.useState(!1),[O,w]=a.useState(!1),[k,A]=a.useState(""),[P,E]=a.useState(null),[C,I]=a.useState(!1),[S,M]=a.useState(""),[B,u]=a.useState(!1),h=a.useRef(null);a.useEffect(()=>{const R=le(),$=ie();R&&$&&b($.username)},[]);const _=()=>{Se(),b(null),s("/",{replace:!0})},j=R=>{const $=document.getElementById(R);$&&$.scrollIntoView({behavior:"smooth",block:"start"})},T=R=>{switch(R){case"ticketing":j("ticket-tracking"),setTimeout(()=>{A(""),w(!0)},300);break;case"form":j("form-token-section"),setTimeout(()=>{M(""),I(!0)},300);break;case"anonymousChat":g(!0);break}},D=R=>{R.preventDefault();const $=k.trim();$&&(E($),w(!1),j("ticket-tracking"))},F=()=>{w(!1),E(null),A(""),j("ticket-submission")},W=R=>{R.preventDefault();const $=S.trim();$&&(I(!1),s(`/form/${$}`))};return i?e.jsx("div",{className:`min-h-screen ${U.FLEX_CENTER} ${t.BG_PRIMARY} text-red-500 text-xl font-poppins`,children:i}):!r||!x?null:e.jsxs("div",{className:"relative min-h-screen duration-300 overflow-hidden",children:[e.jsx(Ye,{intensity:1,zIndex:10,opacity:.3}),e.jsx(we,{logoSrc:r.logoSrc,socials:r.socials,loggedInUser:v,onLogout:_,onNavAction:T}),e.jsxs("main",{className:"mx-auto relative  -z-12 bg-light-bg dark:bg-deep-navy transition-colors  ",children:[e.jsx(Ee,{delay:200,children:e.jsx(Xe,{greeting:r.heroGreeting,name:r.name,tagline:r.heroTagline,bio:r.heroBio,linkedinUrl:r.socials.linkedin})}),e.jsx("section",{id:"about",className:"relative z-10",children:e.jsx(Fe,{data:x})}),e.jsx("section",{id:"research",className:"relative z-10",children:e.jsx(He,{research:d})}),e.jsx("section",{id:"portfolio",className:"relative z-10",children:e.jsx(Ue,{projects:c})}),e.jsx("section",{id:"experience",className:"relative z-10",children:e.jsx(ze,{experiences:p,education:f})}),e.jsx(We,{}),e.jsx(rt,{}),e.jsx(lt,{prefillToken:P,onPrefillConsumed:()=>E(null)}),e.jsx(tt,{}),e.jsx(ue,{pitch:r.contactPitch,linkedinUrl:r.socials.linkedin})]}),e.jsx(_e,{socials:r.socials,copyright:r.copyright}),e.jsx(Ze,{}),e.jsxs("div",{className:"fixed bottom-4 right-4 md:bottom-6 md:right-6 z-[60] print:hidden",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[e.jsx("button",{ref:h,onClick:()=>g(!0),className:`relative ${t.BUTTON_PRIMARY} ${t.TEXT_ON_ACCENT} p-3 md:p-4 rounded-full shadow-lg hover:opacity-90 transition-opacity`,children:e.jsx("span",{className:"text-xl md:text-2xl",children:"ðŸ’¬"})}),e.jsx(Z,{visible:B,title:"CHAT",items:[{label:"TYPE",value:"Anonymous Chat"},{label:"CHANNEL",value:"Durable Object Cloudflare"},{label:"PRIVACY",value:"No Login Required"}],targetRef:h,color:"#f59e0b"})]}),e.jsx(et,{isOpen:y,onClose:()=>g(!1)}),O&&K.createPortal(e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/60 backdrop-blur-sm px-4",onClick:()=>w(!1),children:e.jsxs("div",{className:`${t.BG_SECONDARY} ${t.BORDER} relative w-full max-w-md rounded-xl border p-6 shadow-2xl`,onClick:R=>R.stopPropagation(),children:[e.jsx("button",{type:"button",onClick:()=>w(!1),className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600","aria-label":"Tutup modal ticketing",children:"âœ•"}),e.jsx("h2",{className:`text-2xl font-semibold mb-2 ${t.TEXT_PRIMARY}`,children:"Lacak Tiket"}),e.jsx("p",{className:`${t.TEXT_SECONDARY} mb-6`,children:"Masukkan token tiket untuk melihat status pengaduan Anda atau buat tiket baru jika belum punya token."}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t.TEXT_PRIMARY}`,htmlFor:"ticket-token-input",children:"Token Tiket"}),e.jsx("input",{id:"ticket-token-input",type:"text",value:k,onChange:R=>A(R.target.value),placeholder:"Contoh: TKT-ABC12345",className:`w-full px-4 py-3 rounded-lg border ${t.BORDER} ${t.BG_PRIMARY} ${t.TEXT_PRIMARY} focus:outline-none focus:ring-2 focus:ring-accent-blue`})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[e.jsx("button",{type:"submit",className:`flex-1 px-4 py-3 rounded-lg font-semibold ${t.BUTTON_PRIMARY} ${t.TEXT_ON_ACCENT} hover:opacity-90 transition-opacity`,children:"Lacak Tiket"}),e.jsx("button",{type:"button",onClick:F,className:`flex-1 px-4 py-3 rounded-lg font-semibold border ${t.BORDER} ${t.TEXT_PRIMARY} hover:bg-black/5 dark:hover:bg-white/10 transition-colors`,children:"Buat Tiket Baru"})]})]})]})}),document.body),C&&K.createPortal(e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/60 backdrop-blur-sm px-4",onClick:()=>I(!1),children:e.jsxs("div",{className:`${t.BG_SECONDARY} ${t.BORDER} relative w-full max-w-md rounded-xl border p-6 shadow-2xl`,onClick:R=>R.stopPropagation(),children:[e.jsx("button",{type:"button",onClick:()=>I(!1),className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600","aria-label":"Tutup modal form",children:"âœ•"}),e.jsx("h2",{className:`text-2xl font-semibold mb-2 ${t.TEXT_PRIMARY}`,children:"Akses Formulir"}),e.jsx("p",{className:`${t.TEXT_SECONDARY} mb-6`,children:"Masukkan token formulir untuk mulai mengisi form yang tersedia."}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t.TEXT_PRIMARY}`,htmlFor:"form-token-input",children:"Token Formulir"}),e.jsx("input",{id:"form-token-input",type:"text",value:S,onChange:R=>M(R.target.value),placeholder:"Masukkan token formulir",className:`w-full px-4 py-3 rounded-lg border ${t.BORDER} ${t.BG_PRIMARY} ${t.TEXT_PRIMARY} focus:outline-none focus:ring-2 focus:ring-accent-blue`})]}),e.jsx("button",{type:"submit",className:`w-full px-4 py-3 rounded-lg font-semibold ${t.BUTTON_PRIMARY} ${t.TEXT_ON_ACCENT} hover:opacity-90 transition-opacity`,children:"Buka Formulir"})]})]})}),document.body)]})};export{kt as default};
