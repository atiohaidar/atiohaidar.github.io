import{j as e}from"./particles-CSzCUO-v.js";import{b as c}from"./vendor-BFu755QE.js";import{h as N,i as y,j as v}from"./useApi-aMnoPUty.js";import{c as w,D as $}from"./index-BzGNHlk_.js";import"./useQuery-CnrhNLmL.js";import"./useMutation-D7kuVVOc.js";import"./services-BaVGtfnM.js";import"./apiClient-0gU9eKXL.js";const C=()=>{var u;const[o,h]=c.useState(void 0),{data:n,isLoading:g,error:p}=N({isCompleted:o}),l=y(),m=v(),{theme:j}=w(),t=$[j],[i,x]=c.useState(!1),[a,d]=c.useState({name:"",description:"",completed:!1}),b=async s=>{s.preventDefault();try{await l.mutateAsync(a),d({name:"",description:"",completed:!1}),x(!1)}catch{}},f=async(s,r)=>{if(window.confirm(`Are you sure you want to delete task "${r}"?`))try{await m.mutateAsync(s)}catch{}};return g?e.jsx("div",{className:`text-center py-8 ${t.panel.textMuted}`,children:"Loading tasks..."}):p?e.jsx("div",{className:"p-4 rounded-lg border border-status-danger/40 bg-status-danger-muted",children:e.jsx("p",{className:"text-status-danger-dark",children:p.message})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsx("h3",{className:`text-xl font-bold ${t.panel.text}`,children:"Tasks Management"}),e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[e.jsxs("select",{value:o===void 0?"all":o?"completed":"incomplete",onChange:s=>{const r=s.target.value;h(r==="all"?void 0:r==="completed")},className:`px-3 py-2 rounded-lg text-sm ${t.input}`,children:[e.jsx("option",{value:"all",children:"All Tasks"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"incomplete",children:"Incomplete"})]}),e.jsx("button",{onClick:()=>x(!i),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${t.buttons.info}`,children:i?"Cancel":"Create Task"})]})]}),i&&e.jsxs("form",{onSubmit:b,className:`${t.panel.bg} ${t.panel.border} ${t.panel.text} p-6 rounded-lg space-y-4`,children:[e.jsx("h4",{className:`text-lg font-semibold ${t.panel.text}`,children:"Create New Task"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Task name",value:a.name,onChange:s=>d({...a,name:s.target.value}),className:`w-full px-4 py-2 rounded-lg ${t.input}`,required:!0}),e.jsx("textarea",{placeholder:"Description (optional)",value:a.description,onChange:s=>d({...a,description:s.target.value}),className:`w-full px-4 py-2 rounded-lg ${t.input} resize-none`,rows:3}),e.jsxs("label",{className:"flex items-center gap-2 text-light-slate",children:[e.jsx("input",{type:"checkbox",checked:a.completed,onChange:s=>d({...a,completed:s.target.checked}),className:"w-4 h-4 rounded border border-status-info/40 bg-transparent text-accent-blue focus:ring-status-info"}),e.jsx("span",{children:"Mark as completed"})]})]}),e.jsx("button",{type:"submit",disabled:l.isPending,className:`px-6 py-2 rounded-lg font-semibold transition-colors ${t.buttons.success} disabled:opacity-50 disabled:cursor-not-allowed`,children:l.isPending?"Creating...":"Create Task"}),l.isError&&e.jsx("p",{className:"text-sm text-status-danger-dark",children:(u=l.error)==null?void 0:u.message})]}),e.jsx("div",{className:"space-y-3",children:n&&n.length===0?e.jsx("div",{className:`text-center py-8 ${t.panel.textMuted}`,children:"No tasks found. Create one to get started!"}):n==null?void 0:n.map(s=>e.jsx("div",{className:`${t.panel.bg} ${t.panel.border} ${t.panel.text} p-4 rounded-lg`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:`font-semibold ${t.panel.text}`,children:s.name}),s.completed?e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.badges.success}`,children:"✓ Completed"}):e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.badges.warning}`,children:"○ Pending"})]}),s.description&&e.jsx("p",{className:`${t.panel.textMuted} text-sm mb-2`,children:s.description}),e.jsxs("p",{className:`${t.panel.textMuted} text-xs`,children:[s.created_at&&`Created: ${new Date(s.created_at).toLocaleDateString()}`,s.updated_at&&` • Updated: ${new Date(s.updated_at).toLocaleDateString()}`]})]}),e.jsx("button",{onClick:()=>f(s.id,s.name),disabled:m.isPending,className:`px-3 py-1 text-sm rounded transition-colors ml-4 ${t.buttons.danger} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Delete"})]})},s.id))})]})},_=()=>e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Kelola Todo List Anda"}),e.jsx("p",{className:"text-soft-gray text-sm",children:"Buat, edit, dan hapus tugas-tugas Anda di sini"})]}),e.jsx(C,{})]});export{_ as default};
