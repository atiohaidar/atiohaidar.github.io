import{j as e}from"./particles-CSzCUO-v.js";import{b as r,L as o}from"./vendor-BFu755QE.js";import{z as v,A as g}from"./services-BaVGtfnM.js";import{C as t}from"./index-BzGNHlk_.js";import{a as f}from"./apiClient-0gU9eKXL.js";const C=()=>{const[n,l]=r.useState([]),[m,d]=r.useState(!0),[c,h]=r.useState(null),a=f(),x=(a==null?void 0:a.role)==="admin",u=s=>x||s.created_by===(a==null?void 0:a.username),p=async()=>{try{d(!0);const s=await v();l(s)}catch(s){h("Gagal memuat formulir"),console.error(s)}finally{d(!1)}};r.useEffect(()=>{p()},[]);const b=async(s,N)=>{if(confirm(`Apakah Anda yakin ingin menghapus formulir "${N}"?`))try{await g(s),l(n.filter(i=>i.id!==s))}catch(i){alert("Gagal menghapus formulir"),console.error(i)}},j=s=>{navigator.clipboard.writeText(s),alert("Token berhasil disalin ke clipboard!")};return m?e.jsx("div",{className:"flex justify-center items-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-blue mx-auto mb-4"}),e.jsx("p",{className:t.TEXT_SECONDARY,children:"Memuat formulir..."})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${t.TEXT_PRIMARY}`,children:"Formulir Saya"}),e.jsx(o,{to:"/dashboard/forms/new",className:`${t.BUTTON_PRIMARY} ${t.TEXT_ON_ACCENT} py-2 px-4 rounded-lg font-semibold hover:opacity-90 transition-opacity`,children:"+ Buat Formulir Baru"})]}),c&&e.jsx("div",{className:"bg-red-500 bg-opacity-20 border border-red-500 text-red-500 px-4 py-3 rounded-lg mb-6",children:c}),n.length===0?e.jsxs("div",{className:`${t.BG_SECONDARY} rounded-lg p-12 text-center`,children:[e.jsx("p",{className:`${t.TEXT_SECONDARY} mb-6`,children:"Anda belum memiliki formulir. Buat formulir pertama Anda sekarang!"}),e.jsx(o,{to:"/dashboard/forms/new",className:`inline-block ${t.BUTTON_PRIMARY} ${t.TEXT_ON_ACCENT} py-2 px-6 rounded-lg font-semibold hover:opacity-90 transition-opacity`,children:"Buat Formulir"})]}):e.jsx("div",{className:"grid gap-6",children:n.map(s=>e.jsxs("div",{className:`${t.BG_SECONDARY} rounded-lg p-6 shadow-md`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:`text-xl font-bold ${t.TEXT_PRIMARY} mb-2`,children:s.title}),s.description&&e.jsx("p",{className:`${t.TEXT_SECONDARY} mb-3`,children:s.description}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-sm ${t.TEXT_SECONDARY}`,children:"Token:"}),e.jsx("code",{className:`${t.BG_PRIMARY} px-3 py-1 rounded text-sm ${t.TEXT_ACCENT} font-mono`,children:s.token}),e.jsx("button",{onClick:()=>j(s.token),className:"text-accent-blue hover:text-accent-blue/80 transition-colors",title:"Salin token",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{to:`/dashboard/forms/${s.id}/responses`,className:"text-blue-500 hover:text-blue-400 p-2 rounded-lg hover:bg-blue-500/10 transition-colors",title:"Lihat Respons",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),u(s)&&e.jsxs(e.Fragment,{children:[e.jsx(o,{to:`/dashboard/forms/${s.id}/edit`,className:"text-yellow-500 hover:text-yellow-400 p-2 rounded-lg hover:bg-yellow-500/10 transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>b(s.id,s.title),className:"text-red-500 hover:text-red-400 p-2 rounded-lg hover:bg-red-500/10 transition-colors",title:"Hapus",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]}),s.created_at&&e.jsxs("p",{className:`text-sm ${t.TEXT_SECONDARY}`,children:["Dibuat: ",new Date(s.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})]})]},s.id))})]})};export{C as default};
