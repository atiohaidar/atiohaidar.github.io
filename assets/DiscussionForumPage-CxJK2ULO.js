import{j as e}from"./particles-CSzCUO-v.js";import{u as E,b as l}from"./vendor-BFu755QE.js";import{a as y,g as T,c as F}from"./apiClient-0gU9eKXL.js";import{N as O,S as f,b as U}from"./ScrollReveal-DVDuLnJK.js";import{u as Y}from"./index-BzGNHlk_.js";import{u as A}from"./useParallax-C7KmvLtK.js";import{g as B,c as q}from"./discussionService-Ok7SlrFG.js";import"./ThemeToggle-Cc29PLh4.js";import"./SpyTooltip-Bn4cKGvG.js";const ee=()=>{const d=E(),x=y(),{data:N}=Y(),{profile:C}=N,m=A(),[D,b]=l.useState(null),[j,L]=l.useState([]),[S,w]=l.useState(!0),[v,r]=l.useState(null),[M,n]=l.useState(!1),[s,i]=l.useState({title:"",content:"",creator_name:""}),[u,k]=l.useState(!1);l.useEffect(()=>{const t=T(),a=y();t&&a&&b(a.username)},[]),l.useEffect(()=>{$()},[]);const _=()=>{F(),b(null),d("/",{replace:!0})},$=async()=>{w(!0),r(null);try{const t=await B();L(t)}catch(t){r(t.message||"Failed to load discussions")}finally{w(!1)}},z=async()=>{if(!s.title.trim()||!s.content.trim()){r("Title and content are required");return}!x&&!s.creator_name.trim()&&(s.creator_name="Anonymous"),k(!0),r(null);try{const t={title:s.title.trim(),content:s.content.trim()};!x&&s.creator_name.trim()&&(t.creator_name=s.creator_name.trim());const a=await q(t);n(!1),i({title:"",content:"",creator_name:""}),d(`/discussions/${a.id}`)}catch(t){r(t.message||"Failed to create discussion")}finally{k(!1)}},P=t=>{const a=new Date(t),h=new Date().getTime()-a.getTime(),c=Math.floor(h/6e4),g=Math.floor(h/36e5),p=Math.floor(h/864e5);return c<1?"Just now":c<60?`${c} minute${c>1?"s":""} ago`:g<24?`${g} hour${g>1?"s":""} ago`:p<7?`${p} day${p>1?"s":""} ago`:a.toLocaleDateString()},o=C||{logoSrc:"./PP-Tio.jpg",socials:{github:"https://github.com/atiohaidar",linkedin:"https://www.linkedin.com/in/atiohaidar/",instagram:"https://www.instagram.com/tiohaidarhanif"},copyright:"Sebuah website random"};return e.jsxs("div",{className:"relative min-h-screen bg-light-bg dark:bg-deep-navy transition-colors duration-300 overflow-hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-500/5 via-cyan-500/5 to-purple-500/5 -z-10"}),e.jsx("div",{className:"fixed top-[20%] right-[10%] w-[600px] h-[600px] bg-accent-blue/40 rounded-full blur-[120px] animate-blob mix-blend-multiply dark:mix-blend-screen opacity-90 -z-10 pointer-events-none",style:{transform:`translateY(${m.getOffset(.05,"down")}px)`}}),e.jsx("div",{className:"fixed bottom-[20%] left-[10%] w-[600px] h-[600px] bg-purple-500/40 rounded-full blur-[120px] animate-blob animation-delay-2000 mix-blend-multiply dark:mix-blend-screen opacity-90 -z-10 pointer-events-none",style:{transform:`translateY(${m.getOffset(.08,"down")}px)`}}),e.jsx("div",{className:"fixed top-[40%] left-[40%] w-[600px] h-[600px] bg-cyan-500/40 rounded-full blur-[120px] animate-blob animation-delay-4000 mix-blend-multiply dark:mix-blend-screen opacity-90 -z-10 pointer-events-none",style:{transform:`translateY(${m.getOffset(.12,"down")}px)`}}),e.jsx(O,{logoSrc:o.logoSrc,socials:o.socials,loggedInUser:D,onLogout:_}),e.jsx("main",{className:"mx-auto relative z-10 pt-32 pb-16",children:e.jsxs("div",{className:"container mx-auto px-6 md:px-12",children:[e.jsxs(f,{delay:100,children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-light-text dark:text-white mb-4",children:["Discussion ",e.jsx("span",{className:"text-gradient",children:"Forum"})]}),e.jsx("p",{className:"text-light-muted dark:text-soft-gray max-w-2xl mx-auto",children:"Share ideas, ask questions, and engage with the community"})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("button",{onClick:()=>n(!0),className:"glass-button px-6 py-3 rounded-full text-sm font-medium bg-accent-blue text-white hover:bg-accent-blue/90 hover:shadow-lg hover:shadow-accent-blue/25 transition-all duration-300 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"+"}),"New Discussion"]})})]}),v&&e.jsx("div",{className:"glass-card border-red-500/30 px-4 py-3 rounded-xl mb-6 text-red-500 text-center",children:v}),e.jsx(f,{delay:200,children:S?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-2 border-accent-blue/30 border-t-accent-blue rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-light-muted dark:text-soft-gray",children:"Loading discussions..."})]}):j.length===0?e.jsxs("div",{className:"glass-card rounded-2xl p-12 text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ’¬"}),e.jsx("h3",{className:"text-xl font-semibold text-light-text dark:text-white mb-2",children:"No discussions yet"}),e.jsx("p",{className:"text-light-muted dark:text-soft-gray",children:"Be the first to start a discussion!"})]}):e.jsx("div",{className:"grid gap-6",children:j.map((t,a)=>e.jsx(f,{delay:100+a*50,children:e.jsxs("div",{onClick:()=>d(`/discussions/${t.id}`),className:"glass-card rounded-2xl p-6 cursor-pointer hover:scale-[1.01] hover:shadow-xl transition-all duration-300 group",children:[e.jsx("h2",{className:"text-xl font-semibold text-light-text dark:text-white mb-2 group-hover:text-accent-blue transition-colors",children:t.title}),e.jsx("p",{className:"text-light-muted dark:text-soft-gray mb-4 line-clamp-2",children:t.content}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-light-muted dark:text-slate-400",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-accent-blue/10 flex items-center justify-center text-accent-blue font-bold text-xs",children:t.creator_name.substring(0,2).toUpperCase()}),e.jsx("span",{className:"font-medium",children:t.creator_name}),t.is_anonymous&&e.jsx("span",{className:"text-xs opacity-60",children:"(anonymous)"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-light-muted dark:text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),t.reply_count||0]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),P(t.created_at)]})]})]})]})},t.id))})})]})}),e.jsx(U,{socials:o.socials,copyright:o.copyright}),M&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[70] p-4",onClick:()=>n(!1),children:e.jsx("div",{className:"glass-card rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-fade-in-up",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-light-text dark:text-white",children:"Create New Discussion"}),e.jsx("button",{onClick:()=>n(!1),className:"p-2 rounded-lg text-light-muted dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),!x&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-white mb-2",children:"Your Name (optional)"}),e.jsx("input",{type:"text",value:s.creator_name,onChange:t=>i({...s,creator_name:t.target.value}),placeholder:"Leave empty to post as Anonymous",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-white/10 bg-white/50 dark:bg-white/5 text-light-text dark:text-white placeholder-light-muted dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-accent-blue/50 transition-all"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-white mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:s.title,onChange:t=>i({...s,title:t.target.value}),placeholder:"Enter discussion title",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-white/10 bg-white/50 dark:bg-white/5 text-light-text dark:text-white placeholder-light-muted dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-accent-blue/50 transition-all"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-white mb-2",children:"Content *"}),e.jsx("textarea",{value:s.content,onChange:t=>i({...s,content:t.target.value}),placeholder:"Share your thoughts, questions, or ideas... (Links are allowed)",rows:6,className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-white/10 bg-white/50 dark:bg-white/5 text-light-text dark:text-white placeholder-light-muted dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-accent-blue/50 transition-all resize-none"}),e.jsx("p",{className:"text-xs text-light-muted dark:text-slate-500 mt-1",children:"Note: You can include links, but file attachments are not supported."})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>{n(!1),i({title:"",content:"",creator_name:""}),r(null)},disabled:u,className:"glass-button px-6 py-2.5 rounded-full text-sm font-medium text-light-muted dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-white/10 transition-all",children:"Cancel"}),e.jsx("button",{onClick:z,disabled:u,className:"px-6 py-2.5 rounded-full text-sm font-medium bg-accent-blue text-white hover:bg-accent-blue/90 hover:shadow-lg hover:shadow-accent-blue/25 transition-all disabled:opacity-50",children:u?"Creating...":"Create Discussion"})]})]})})})]})};export{ee as default};
