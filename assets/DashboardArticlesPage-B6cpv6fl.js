import{j as e}from"./particles-CSzCUO-v.js";import{u as p}from"./useQuery-CnrhNLmL.js";import{d as b,c as g,D as j}from"./index-BzGNHlk_.js";import{u as h}from"./useMutation-D7kuVVOc.js";import{w as f,x as N,c as y}from"./services-BaVGtfnM.js";import{L as $,u as k}from"./vendor-BFu755QE.js";function v({article:t,palette:s,onTogglePublished:r,onEdit:n,onDelete:o,updatePending:l,deletePending:i}){const d=t.published?s.badges.success:s.badges.warning;return e.jsx("div",{className:`${s.panel.bg} ${s.panel.border} rounded-lg p-4 hover:border-accent-blue/30 transition-colors`,children:e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:`font-medium ${s.panel.text}`,children:t.title}),e.jsxs("p",{className:`${s.panel.textMuted} text-sm`,children:["Slug: ",t.slug]}),e.jsxs("p",{className:`${s.panel.textMuted} text-sm line-clamp-2`,children:[t.content.substring(0,150),t.content.length>150?"...":""]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded ${d}`,children:t.published?"Published":"Draft"}),t.created_at&&e.jsxs("span",{className:`text-xs ${s.panel.textMuted}`,children:["Dibuat: ",new Date(t.created_at).toLocaleDateString("id-ID")]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{onClick:()=>r(t),className:`px-3 py-2 rounded text-sm transition-colors ${s.buttons.info}`,disabled:l,title:t.published?"Unpublish":"Publish",children:t.published?"ðŸ‘ï¸":"ðŸ‘ï¸â€ðŸ—¨ï¸"}),e.jsx("button",{onClick:()=>n(t),className:`px-3 py-2 rounded text-sm transition-colors ${s.buttons.primary}`,disabled:l,children:"Edit"}),e.jsx("button",{onClick:()=>o(t.slug,t.title),className:`px-3 py-2 rounded text-sm transition-colors ${s.buttons.danger}`,disabled:i,children:"Hapus"})]})]})})}function A({articles:t,palette:s,isLoading:r,onCreateClick:n,onEdit:o,onDelete:l,onTogglePublished:i,createDisabled:d=!1,updatePending:c,deletePending:m}){return e.jsxs("div",{className:`${s.panel.bg} ${s.panel.border} rounded-lg p-6 space-y-6`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:`text-lg font-semibold ${s.panel.text}`,children:"Daftar Articles"}),e.jsx($,{to:"/articles",className:`px-4 py-2 rounded-lg transition-colors ${s.buttons.secondary}`,children:"Lihat Artikel Dari Backend"}),e.jsx("button",{onClick:n,type:"button",className:`px-4 py-2 rounded-lg transition-colors ${s.buttons.info}`,disabled:d,children:"+ Buat Article Baru"})]}),r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:s.panel.textMuted,children:"Memuat articles..."})}):t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:s.panel.textMuted,children:"Belum ada article. Buat yang pertama!"})}):e.jsx("div",{className:"space-y-3",children:t.map(u=>e.jsx(v,{article:u,palette:s,onTogglePublished:i,onEdit:o,onDelete:l,updatePending:c,deletePending:m},u.slug))})]})}function D({palette:t}){return e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:`text-xl font-semibold mb-2 ${t.panel.text}`,children:"Kelola Articles"}),e.jsx("p",{className:`text-sm ${t.panel.textMuted}`,children:"Buat dan kelola artikel blog atau konten Anda"})]})}const L=()=>{const t=b(),s=k(),{theme:r}=g(),n=j[r],{data:o=[],isLoading:l}=p({queryKey:["articles"],queryFn:()=>y({page:0})}),i=()=>t.invalidateQueries({queryKey:["articles"]}),d=h({mutationFn:({slug:a,updates:x})=>N(a,x),onSuccess:i,onError:a=>alert(a.message||"Gagal mengupdate artikel")}),c=h({mutationFn:a=>f(a),onSuccess:i,onError:a=>alert(a.message||"Gagal menghapus artikel")}),m=(a,x)=>{window.confirm(`Apakah Anda yakin ingin menghapus artikel "${x}"?`)&&c.mutate(a)},u=a=>{d.mutate({slug:a.slug,updates:{published:!a.published}})};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsx(D,{palette:n}),e.jsx(A,{articles:o,palette:n,isLoading:l,onCreateClick:()=>s("/dashboard/articles/new"),onEdit:a=>s(`/dashboard/articles/${a.slug}/edit`),onDelete:m,onTogglePublished:u,createDisabled:!1,updatePending:d.isPending,deletePending:c.isPending})]})};export{L as default};
