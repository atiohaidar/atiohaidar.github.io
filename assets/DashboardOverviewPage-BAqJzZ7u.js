import{j as e}from"./particles-CSzCUO-v.js";import{c as $,D as M}from"./index-BzGNHlk_.js";import{a as U}from"./apiClient-0gU9eKXL.js";import{b as C,c as D,d as E,e as L,f as A,g as O}from"./useApi-aMnoPUty.js";import{b as o}from"./vendor-BFu755QE.js";import"./useQuery-CnrhNLmL.js";import"./useMutation-D7kuVVOc.js";import"./services-BaVGtfnM.js";const _=({isOpen:c,onClose:n,currentBalance:r})=>{const[t,p]=o.useState(""),[m,h]=o.useState(""),[g,x]=o.useState(""),[b,s]=o.useState(null),[f,d]=o.useState(null),{mutate:v,isPending:j}=C();if(!c)return null;const i=l=>{l.preventDefault(),s(null),d(null);const u=parseFloat(m);if(isNaN(u)||u<=0){s("Jumlah transfer tidak valid");return}if(u>r){s("Saldo tidak mencukupi");return}v({toUsername:t,amount:u,description:g},{onSuccess:y=>{n(),h(""),p(""),x(""),d(null)},onError:y=>{s(y.message||"Transfer gagal")}})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 w-full max-w-md border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold dark:text-white",children:"Transfer Saldo"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"âœ•"})]}),b&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg text-sm",children:b}),f&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg text-sm",children:f}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username Penerima"}),e.jsx("input",{type:"text",value:t,onChange:l=>p(l.target.value),className:"w-full px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Jumlah"}),e.jsx("input",{type:"number",value:m,onChange:l=>h(l.target.value),className:"w-full px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0",min:"1",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Saldo saat ini: ",r]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Catatan (Opsional)"}),e.jsx("textarea",{value:g,onChange:l=>x(l.target.value),className:"w-full px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Untuk beli kopi...",rows:2})]}),e.jsx("button",{type:"submit",disabled:j,className:"w-full py-2.5 rounded-xl bg-gradient-to-r from-blue-600 to-cyan-500 text-white font-medium hover:from-blue-700 hover:to-cyan-600 focus:ring-4 focus:ring-blue-500/30 disabled:opacity-50 transition-all",children:j?"Memproses...":"Kirim Sekarang"})]})]})})},z=({isOpen:c,onClose:n})=>{const[r,t]=o.useState(""),[p,m]=o.useState(""),[h,g]=o.useState(""),[x,b]=o.useState(null),[s,f]=o.useState(null),{mutate:d,isPending:v}=D();if(!c)return null;const j=i=>{i.preventDefault(),b(null),f(null);const l=parseFloat(p);if(isNaN(l)||l<=0){b("Jumlah top up tidak valid");return}d({targetUsername:r,amount:l,description:h},{onSuccess:u=>{n(),m(""),t(""),g(""),f(null)},onError:u=>{b(u.message||"Top up gagal")}})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 w-full max-w-md border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold dark:text-white",children:"Top Up Saldo (Admin)"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"âœ•"})]}),x&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg text-sm",children:x}),s&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg text-sm",children:s}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username Target"}),e.jsx("input",{type:"text",value:r,onChange:i=>t(i.target.value),className:"w-full px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Jumlah Top Up"}),e.jsx("input",{type:"number",value:p,onChange:i=>m(i.target.value),className:"w-full px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0",min:"1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Catatan (Opsional)"}),e.jsx("textarea",{value:h,onChange:i=>g(i.target.value),className:"w-full px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Bonus bulanan...",rows:2})]}),e.jsx("button",{type:"submit",disabled:v,className:"w-full py-2.5 rounded-xl bg-gradient-to-r from-purple-600 to-pink-500 text-white font-medium hover:from-purple-700 hover:to-pink-600 focus:ring-4 focus:ring-purple-500/30 disabled:opacity-50 transition-all",children:v?"Memproses...":"Top Up Sekarang"})]})]})})},G=()=>{const{theme:c}=$(),n=U(),{data:r}=E(n==null?void 0:n.username),t=M[c],[p,m]=o.useState(!1),[h,g]=o.useState(!1),{data:x,isLoading:b}=L(),{data:s,isLoading:f}=A(),{data:d,isLoading:v}=O(),j=(x==null?void 0:x.totalTasks)||0,i=(s==null?void 0:s.filter(a=>a.status!=="solved").length)||0,l=(d==null?void 0:d.filter(a=>new Date(a.event_date)>new Date).length)||0,u=[{title:"Total Tugas",value:b?"...":j.toString(),trend:"Cek tugas",icon:"ðŸ“",color:"from-blue-500 to-cyan-400"},{title:"Tiket Aktif",value:f?"...":i.toString(),trend:"Masalah terbuka",icon:"ðŸŽ«",color:"from-orange-500 to-red-500"},{title:"Acara Mendatang",value:v?"...":l.toString(),trend:"Segera",icon:"ðŸŽ‰",color:"from-teal-500 to-emerald-400"}],y=(s==null?void 0:s.slice(0,3).map(a=>({id:`ticket-${a.id}`,type:"Ticket",title:a.title,time:new Date(a.created_at||Date.now()).toLocaleDateString(),status:a.status})))||[],N=(d==null?void 0:d.slice(0,2).map(a=>({id:`event-${a.id}`,type:"Event",title:a.title,time:new Date(a.event_date).toLocaleDateString(),status:"Mendatang"})))||[],k=[...y,...N].slice(0,5),w=new Date().getHours(),S=w<12?"Selamat Pagi":w<18?"Selamat Siang":"Selamat Sore";return e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl p-8 shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/20 via-cyan-600/20 to-indigo-600/20 backdrop-blur-3xl z-0"}),e.jsx("div",{className:"absolute top-0 right-0 -mt-20 -mr-20 w-80 h-80 bg-cyan-500/30 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 -mb-20 -ml-20 w-80 h-80 bg-blue-500/30 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:`text-4xl md:text-5xl font-bold ${t.panel.text} tracking-tight`,children:[S,", ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-400",children:(r==null?void 0:r.name)||(n==null?void 0:n.name)})]}),e.jsx("p",{className:`mt-2 text-lg ${t.panel.textMuted}`,children:"Jadi inilah yang terjadi hari ini, have a nice day!"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium border ${c==="dark"?"bg-white/5 border-white/10 text-white":"bg-white/50 border-gray-200 text-gray-800"} backdrop-blur-md shadow-lg`,children:new Date().toLocaleDateString("id-ID",{weekday:"long",month:"long",day:"numeric"})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:`relative group p-6 rounded-2xl ${t.panel.bg} ${t.panel.border} shadow-xl transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl overflow-hidden`,children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-gradient-to-br from-green-500 to-emerald-400 opacity-20 blur-2xl group-hover:opacity-40 transition-opacity"}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-green-500 to-emerald-400 text-white shadow-lg",children:e.jsx("span",{className:"text-xl",children:"ðŸ’°"})}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${c==="dark"?"bg-white/10 text-white/80":"bg-green-100 text-green-700"}`,children:"Dompet"})]}),e.jsxs("h3",{className:`text-3xl font-bold ${t.panel.text} mb-1`,children:["Rp ",((r==null?void 0:r.balance)||0).toLocaleString()]}),e.jsx("p",{className:`text-sm font-medium ${t.panel.textMuted}`,children:"Total Saldo"})]}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-200/10",children:[(r==null?void 0:r.role)==="admin"&&e.jsx("button",{onClick:()=>g(!0),className:"flex-1 text-xs font-bold px-3 py-2 rounded-xl bg-purple-500 hover:bg-purple-600 text-white transition-all shadow-lg hover:shadow-purple-500/20 active:scale-95",children:"Top Up"}),e.jsx("button",{onClick:()=>m(!0),className:"flex-1 text-xs font-bold px-3 py-2 rounded-xl bg-green-500 hover:bg-green-600 text-white transition-all shadow-lg hover:shadow-green-500/20 active:scale-95",children:"Transfer"})]})]})]}),u.map((a,T)=>e.jsxs("div",{className:`relative group p-6 rounded-2xl ${t.panel.bg} ${t.panel.border} shadow-xl transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl overflow-hidden`,children:[e.jsx("div",{className:`absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-gradient-to-br ${a.color} opacity-20 blur-2xl group-hover:opacity-40 transition-opacity`}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${a.color} text-white shadow-lg`,children:e.jsx("span",{className:"text-xl",children:a.icon})}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${c==="dark"?"bg-white/10 text-white/80":"bg-black/5 text-gray-600"}`,children:a.trend})]}),e.jsx("h3",{className:`text-3xl font-bold ${t.panel.text} mb-1`,children:a.value}),e.jsx("p",{className:`text-sm font-medium ${t.panel.textMuted}`,children:a.title})]})]},T))]}),e.jsx(_,{isOpen:p,onClose:()=>m(!1),currentBalance:(r==null?void 0:r.balance)||0}),e.jsx(z,{isOpen:h,onClose:()=>g(!1)}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:`lg:col-span-2 p-6 rounded-3xl ${t.panel.bg} ${t.panel.border} shadow-xl`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:`text-xl font-bold ${t.panel.text}`,children:"Ringkasan Produktivitas"}),e.jsxs("select",{className:`bg-transparent border-none text-sm font-medium ${t.panel.textMuted} focus:ring-0 cursor-pointer`,children:[e.jsx("option",{children:"Minggu Ini"}),e.jsx("option",{children:"Minggu Lalu"})]})]}),e.jsx("div",{className:"h-64 flex items-center justify-center rounded-2xl bg-gradient-to-r from-blue-500/5 to-cyan-500/5 border border-dashed border-gray-500/20",children:e.jsx("p",{className:t.panel.textMuted,children:"Area Visualisasi Grafik"})})]}),e.jsxs("div",{className:`p-6 rounded-3xl ${t.panel.bg} ${t.panel.border} shadow-xl`,children:[e.jsx("h2",{className:`text-xl font-bold ${t.panel.text} mb-6`,children:"Aktivitas Terbaru"}),e.jsx("div",{className:"space-y-6",children:k.length>0?k.map(a=>e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-gradient-to-r from-blue-400 to-cyan-500 shadow-[0_0_8px_rgba(37,99,235,0.5)]"}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${t.panel.text} group-hover:text-blue-400 transition-colors`,children:a.title}),e.jsxs("p",{className:`text-xs ${t.panel.textMuted} mt-1`,children:[a.type," â€¢ ",a.time," â€¢ ",a.status]})]})]},a.id)):e.jsx("p",{className:`text-sm ${t.panel.textMuted}`,children:"Tidak ada aktivitas terbaru."})}),e.jsx("button",{className:`mt-8 w-full py-3 rounded-xl text-sm font-semibold transition-all ${c==="dark"?"bg-white/5 hover:bg-white/10 text-white border border-white/10":"bg-black/5 hover:bg-black/10 text-gray-800"}`,children:"Lihat Semua Aktivitas"})]})]})]})};export{G as default};
