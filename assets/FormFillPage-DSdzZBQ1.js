import{j as e}from"./particles-CSzCUO-v.js";import{h as T,u as _,b as i}from"./vendor-BFu755QE.js";import{I as B,J as D}from"./services-BaVGtfnM.js";import{u as K}from"./index-BzGNHlk_.js";import{u as $}from"./useParallax-C7KmvLtK.js";import{N as h,b,S as N}from"./ScrollReveal-DVDuLnJK.js";import{g as O,a as R,c as U}from"./apiClient-0gU9eKXL.js";import"./ThemeToggle-Cc29PLh4.js";import"./SpyTooltip-Bn4cKGvG.js";const Z=()=>{const{token:o}=T(),d=_(),{data:S}=K(),{profile:z}=S,c=$(),[m,g]=i.useState(null),[l,F]=i.useState(null),[A,p]=i.useState(!0),[f,v]=i.useState(null),[w,L]=i.useState(""),[u,j]=i.useState({}),[k,y]=i.useState(!1),[P,C]=i.useState(!1);i.useEffect(()=>{const t=O(),s=R();t&&s&&g(s.username)},[]),i.useEffect(()=>{(async()=>{if(!o){v("Token tidak valid"),p(!1);return}try{const s=await B(o);F(s);const r={};s.questions.forEach(n=>{r[n.id]=""}),j(r)}catch(s){v("Formulir tidak ditemukan atau token tidak valid"),console.error(s)}finally{p(!1)}})()},[o]);const x=()=>{U(),g(null),d("/",{replace:!0})},E=(t,s)=>{j(r=>({...r,[t]:s}))},M=async t=>{if(t.preventDefault(),!o||!l)return;if(l.questions.filter(r=>{var n;return!((n=u[r.id])!=null&&n.trim())}).length>0){alert("Mohon jawab semua pertanyaan");return}y(!0);try{const r={respondent_name:w.trim()||void 0,answers:l.questions.map(n=>({question_id:n.id,answer_text:u[n.id]}))};await D(o,r),C(!0)}catch(r){alert("Gagal mengirim jawaban. Silakan coba lagi."),console.error(r)}finally{y(!1)}},a=z||{logoSrc:"./PP-Tio.jpg",socials:{github:"https://github.com/atiohaidar",linkedin:"https://www.linkedin.com/in/atiohaidar/",instagram:"https://www.instagram.com/tiohaidarhanif"},copyright:"Sebuah website random"};return A?e.jsxs("div",{className:"relative min-h-screen bg-light-bg dark:bg-deep-navy transition-colors duration-300 overflow-hidden flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-500/5 via-cyan-500/5 to-purple-500/5 -z-10"}),e.jsx("div",{className:"fixed top-[20%] right-[10%] w-[600px] h-[600px] bg-accent-blue/40 rounded-full blur-[120px] animate-blob mix-blend-multiply dark:mix-blend-screen opacity-90 -z-10 pointer-events-none",style:{transform:`translateY(${c.getOffset(.05,"down")}px)`}}),e.jsxs("div",{className:"text-center relative z-10",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-3 border-accent-blue/30 border-t-accent-blue rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-xl text-light-muted dark:text-soft-gray",children:"Memuat formulir..."})]})]}):f||!l?e.jsxs("div",{className:"relative min-h-screen bg-light-bg dark:bg-deep-navy transition-colors duration-300 overflow-hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-500/5 via-cyan-500/5 to-purple-500/5 -z-10"}),e.jsx("div",{className:"fixed top-[20%] right-[10%] w-[600px] h-[600px] bg-accent-blue/40 rounded-full blur-[120px] animate-blob mix-blend-multiply dark:mix-blend-screen opacity-90 -z-10 pointer-events-none"}),e.jsx(h,{logoSrc:a.logoSrc,socials:a.socials,loggedInUser:m,onLogout:x}),e.jsx("main",{className:"mx-auto relative z-10 pt-32 pb-16 flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center px-4",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âŒ"}),e.jsx("h1",{className:"text-3xl font-bold text-light-text dark:text-white mb-4",children:"Error"}),e.jsx("p",{className:"text-light-muted dark:text-soft-gray mb-6",children:f||"Formulir tidak ditemukan"}),e.jsx("button",{onClick:()=>d("/"),className:"px-6 py-3 rounded-full text-sm font-medium bg-accent-blue text-white hover:bg-accent-blue/90 hover:shadow-lg hover:shadow-accent-blue/25 transition-all",children:"Kembali ke Beranda"})]})}),e.jsx(b,{socials:a.socials,copyright:a.copyright})]}):P?e.jsxs("div",{className:"relative min-h-screen bg-light-bg dark:bg-deep-navy transition-colors duration-300 overflow-hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-500/5 via-cyan-500/5 to-purple-500/5 -z-10"}),e.jsx("div",{className:"fixed top-[20%] right-[10%] w-[600px] h-[600px] bg-green-500/40 rounded-full blur-[120px] animate-blob mix-blend-multiply dark:mix-blend-screen opacity-90 -z-10 pointer-events-none"}),e.jsx(h,{logoSrc:a.logoSrc,socials:a.socials,loggedInUser:m,onLogout:x}),e.jsx("main",{className:"mx-auto relative z-10 pt-32 pb-16 flex items-center justify-center min-h-[60vh]",children:e.jsx(N,{delay:100,children:e.jsxs("div",{className:"text-center px-4 max-w-md",children:[e.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-green-500/30",children:e.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h1",{className:"text-3xl font-bold text-light-text dark:text-white mb-4",children:"Terima Kasih!"}),e.jsx("p",{className:"text-light-muted dark:text-soft-gray mb-8",children:"Jawaban Anda telah berhasil dikirim. Kami menghargai waktu Anda untuk mengisi formulir ini."}),e.jsx("button",{onClick:()=>d("/"),className:"px-6 py-3 rounded-full text-sm font-medium bg-accent-blue text-white hover:bg-accent-blue/90 hover:shadow-lg hover:shadow-accent-blue/25 transition-all",children:"Kembali ke Beranda"})]})})}),e.jsx(b,{socials:a.socials,copyright:a.copyright})]}):e.jsxs("div",{className:"relative min-h-screen bg-light-bg dark:bg-deep-navy transition-colors duration-300 overflow-hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-500/5 via-cyan-500/5 to-purple-500/5 -z-10"}),e.jsx("div",{className:"fixed top-[20%] right-[10%] w-[600px] h-[600px] bg-accent-blue/40 rounded-full blur-[120px] animate-blob mix-blend-multiply dark:mix-blend-screen opacity-90 -z-10 pointer-events-none",style:{transform:`translateY(${c.getOffset(.05,"down")}px)`}}),e.jsx("div",{className:"fixed bottom-[20%] left-[10%] w-[600px] h-[600px] bg-purple-500/40 rounded-full blur-[120px] animate-blob animation-delay-2000 mix-blend-multiply dark:mix-blend-screen opacity-90 -z-10 pointer-events-none",style:{transform:`translateY(${c.getOffset(.08,"down")}px)`}}),e.jsx(h,{logoSrc:a.logoSrc,socials:a.socials,loggedInUser:m,onLogout:x}),e.jsx("main",{className:"mx-auto relative z-10 pt-32 pb-16",children:e.jsx("div",{className:"container mx-auto px-6 md:px-12 max-w-3xl",children:e.jsx(N,{delay:100,children:e.jsxs("div",{className:"glass-card rounded-2xl p-6 md:p-8 lg:p-12",children:[e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-light-text dark:text-white mb-3",children:l.form.title}),l.form.description&&e.jsx("p",{className:"text-light-muted dark:text-soft-gray mb-8",children:l.form.description}),e.jsxs("form",{onSubmit:M,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"respondent_name",className:"block text-light-text dark:text-white mb-2 font-medium",children:"Nama Anda (Opsional)"}),e.jsx("input",{type:"text",id:"respondent_name",value:w,onChange:t=>L(t.target.value),placeholder:"Masukkan nama Anda",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-white/10 bg-white/50 dark:bg-white/5 text-light-text dark:text-white placeholder-light-muted dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-accent-blue/50 transition-all"})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-white/10 pt-8 space-y-6",children:l.questions.map((t,s)=>e.jsxs("div",{children:[e.jsxs("label",{htmlFor:`question-${t.id}`,className:"block text-light-text dark:text-white mb-2 font-medium",children:[s+1,". ",t.question_text," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:`question-${t.id}`,value:u[t.id]||"",onChange:r=>E(t.id,r.target.value),placeholder:"Masukkan jawaban Anda",rows:4,className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-white/10 bg-white/50 dark:bg-white/5 text-light-text dark:text-white placeholder-light-muted dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-accent-blue/50 transition-all resize-none",required:!0})]},t.id))}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d("/"),className:"flex-1 glass-button px-6 py-3 rounded-full text-sm font-medium text-light-muted dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-white/10 transition-all",children:"Batal"}),e.jsx("button",{type:"submit",disabled:k,className:"flex-1 px-6 py-3 rounded-full text-sm font-medium bg-accent-blue text-white hover:bg-accent-blue/90 hover:shadow-lg hover:shadow-accent-blue/25 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Mengirim...":"Kirim Jawaban"})]})]})]})})})}),e.jsx(b,{socials:a.socials,copyright:a.copyright})]})};export{Z as default};
