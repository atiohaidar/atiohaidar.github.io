import{j as e}from"./particles-CSzCUO-v.js";import{b as r,L as h}from"./vendor-BFu755QE.js";import{r as w}from"./roomService-DyUIZVgF.js";import{c as f,D as g}from"./index-BzGNHlk_.js";import{a as R}from"./apiClient-0gU9eKXL.js";const M=({showActions:i=!1,showBookingAction:l=!0,defaultAvailableOnly:d=void 0})=>{const[t,v]=r.useState([]),[c,m]=r.useState(!0),[u,x]=r.useState(null),[n,o]=r.useState("all"),{theme:j}=f(),s=g[j];r.useEffect(()=>{b()},[]);const b=async()=>{try{m(!0);const a=await w.getRooms();v(a),x(null)}catch(a){x("Gagal memuat daftar ruangan"),console.error("Error fetching rooms:",a)}finally{m(!1)}},p=t.filter(a=>n==="available"?a.available:n==="unavailable"?!a.available:!0),N=t.length,y=t.filter(a=>a.available).length,$=t.filter(a=>!a.available).length,k=a=>a.available?e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.badges.success}`,children:"Tersedia"}):e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.badges.danger}`,children:"Tidak Tersedia"});return c?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-blue"})}):u?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-status-danger-dark mb-4",children:u}),e.jsx("button",{onClick:b,className:`px-4 py-2 rounded transition-colors ${s.buttons.info}`,children:"Coba Lagi"})]}):p.length===0&&!c?e.jsxs("div",{className:`text-center py-12 ${s.panel.textMuted}`,children:[e.jsx("div",{className:"text-xl mb-2",children:"Belum ada ruangan"}),e.jsx("p",{className:"text-sm",children:n==="available"?"Belum ada ruangan tersedia.":n==="unavailable"?"Belum ada ruangan tidak tersedia.":"Belum ada ruangan yang terdaftar."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`flex flex-wrap items-center gap-4 pb-4 ${s.listDivider} border-b`,children:[e.jsx("span",{className:`text-sm font-medium ${s.panel.text}`,children:"Filter:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>o("all"),className:`px-3 py-1 text-sm rounded-lg transition-colors ${n==="all"?s.buttons.info:`${s.sidebar.badgeDefault} hover:opacity-90`}`,children:["Semua (",N,")"]}),e.jsxs("button",{onClick:()=>o("available"),className:`px-3 py-1 text-sm rounded-lg transition-colors ${n==="available"?s.buttons.success:`${s.sidebar.badgeDefault} hover:opacity-90`}`,children:["Tersedia (",y,")"]}),e.jsxs("button",{onClick:()=>o("unavailable"),className:`px-3 py-1 text-sm rounded-lg transition-colors ${n==="unavailable"?s.buttons.danger:`${s.sidebar.badgeDefault} hover:opacity-90`}`,children:["Tidak Tersedia (",$,")"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(a=>e.jsxs("div",{className:`${s.panel.bg} ${s.panel.border} ${s.panel.text} rounded-lg p-6 transition-all duration-300 hover:border-accent-blue/50`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${s.panel.text}`,children:a.name}),k(a)]}),e.jsxs("div",{className:`space-y-2 text-sm ${s.panel.textMuted} mb-4`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-accent-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Kapasitas: ",a.capacity," orang"]}),a.description&&e.jsx("p",{className:"text-xs line-clamp-2",children:a.description})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(h,{to:`/dashboard/rooms/${a.id}`,className:"text-accent-blue hover:opacity-80 transition-colors text-sm",children:"Detail"})})]},a.id))})]})},A=()=>{const i=R(),l=(i==null?void 0:i.role)==="admin",{theme:d}=f(),t=g[d];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("h2",{className:`text-xl font-semibold mb-2 ${t.panel.text}`,children:l?"Manajemen Ruangan":"Daftar Ruangan"}),e.jsx("p",{className:`text-sm ${t.panel.textMuted}`,children:l?"Kelola ruangan yang tersedia untuk booking":"Lihat informasi ruangan yang tersedia"})]}),l&&e.jsx("div",{className:"flex space-x-3",children:e.jsx(h,{to:"/dashboard/rooms/new",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${t.buttons.info}`,children:"+ Tambah Ruangan"})})]}),e.jsx("div",{className:`${t.panel.bg} ${t.panel.border} rounded-lg p-6`,children:e.jsx(M,{showActions:l,showBookingAction:!1})})]})};export{A as default};
