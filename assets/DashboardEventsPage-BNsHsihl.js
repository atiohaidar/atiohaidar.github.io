import{j as a}from"./particles-CSzCUO-v.js";import{u,b as h,L as E}from"./vendor-BFu755QE.js";import{u as T}from"./useQuery-CnrhNLmL.js";import{r as C}from"./services-BaVGtfnM.js";import{a as R}from"./apiClient-0gU9eKXL.js";import{C as e}from"./index-BzGNHlk_.js";const D=()=>{const c=u(),l=R(),[t,i]=h.useState("all"),{data:m,isLoading:x,error:o,refetch:_}=T({queryKey:["events"],queryFn:C}),d=(s=>{if(!s)return[];const r=new Date;switch(t){case"upcoming":return s.filter(n=>new Date(n.event_date)>=r);case"past":return s.filter(n=>new Date(n.event_date)<r);default:return s}})(m),p=s=>new Date(s).toLocaleString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),N=s=>new Date(s)>=new Date;return o?a.jsx("div",{className:`min-h-screen ${e.BG_PRIMARY} p-6`,children:a.jsx("div",{className:`${e.BG_SECONDARY} p-6 rounded-lg border ${e.BORDER}`,children:a.jsxs("p",{className:`${e.TEXT_ERROR}`,children:["Error: ",o.message]})})}):a.jsx("div",{className:`min-h-screen ${e.BG_PRIMARY} p-6`,children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6 flex justify-between items-center flex-wrap gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:`text-3xl font-bold ${e.TEXT_PRIMARY} mb-2`,children:"Manajemen Acara"}),a.jsx("p",{className:e.TEXT_SECONDARY,children:"Kelola acara, pendaftaran, dan presensi peserta"})]}),a.jsx("button",{onClick:()=>c("/dashboard/events/new"),className:`px-6 py-3 ${e.BG_ACCENT} ${e.TEXT_ACCENT_CONTRAST} rounded-lg hover:opacity-90 transition-opacity`,children:"+ Buat Acara Baru"})]}),a.jsxs("div",{className:"mb-6 flex gap-2",children:[a.jsx("button",{onClick:()=>i("all"),className:`px-4 py-2 rounded-lg transition-colors ${t==="all"?`${e.BG_ACCENT} ${e.TEXT_ACCENT_CONTRAST}`:`${e.BG_SECONDARY} ${e.TEXT_SECONDARY} hover:${e.BG_HOVER}`}`,children:"Semua"}),a.jsx("button",{onClick:()=>i("upcoming"),className:`px-4 py-2 rounded-lg transition-colors ${t==="upcoming"?`${e.BG_ACCENT} ${e.TEXT_ACCENT_CONTRAST}`:`${e.BG_SECONDARY} ${e.TEXT_SECONDARY} hover:${e.BG_HOVER}`}`,children:"Akan Datang"}),a.jsx("button",{onClick:()=>i("past"),className:`px-4 py-2 rounded-lg transition-colors ${t==="past"?`${e.BG_ACCENT} ${e.TEXT_ACCENT_CONTRAST}`:`${e.BG_SECONDARY} ${e.TEXT_SECONDARY} hover:${e.BG_HOVER}`}`,children:"Telah Lewat"})]}),x?a.jsxs("div",{className:`${e.BG_SECONDARY} p-8 rounded-lg border ${e.BORDER} text-center`,children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-blue mx-auto mb-4"}),a.jsx("p",{className:e.TEXT_SECONDARY,children:"Memuat acara..."})]}):d.length===0?a.jsxs("div",{className:`${e.BG_SECONDARY} p-8 rounded-lg border ${e.BORDER} text-center`,children:[a.jsx("p",{className:`${e.TEXT_SECONDARY} mb-4`,children:t==="all"?"Belum ada acara.":`Tidak ada acara ${t==="upcoming"?"yang akan datang":"yang telah lewat"}.`}),t==="all"&&a.jsx("button",{onClick:()=>c("/dashboard/events/new"),className:`px-6 py-3 ${e.BG_ACCENT} ${e.TEXT_ACCENT_CONTRAST} rounded-lg hover:opacity-90 transition-opacity`,children:"Buat Acara Pertama"})]}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(s=>{const r=N(s.event_date),n=(l==null?void 0:l.username)===s.created_by;return a.jsxs(E,{to:`/dashboard/events/${s.id}`,className:`${e.BG_SECONDARY} p-6 rounded-lg border ${e.BORDER} hover:${e.BG_HOVER} transition-colors group`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`text-xl font-semibold ${e.TEXT_PRIMARY} mb-1 group-hover:text-accent-blue transition-colors`,children:s.title}),n&&a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-accent-blue text-white rounded",children:"Pembuat"})]}),a.jsx("span",{className:`text-2xl ${r?"":"opacity-50"}`,children:r?"üéâ":"üìÖ"})]}),s.description&&a.jsx("p",{className:`${e.TEXT_SECONDARY} mb-4 line-clamp-2`,children:s.description}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx("span",{className:"mr-2",children:"üìÖ"}),a.jsx("span",{className:e.TEXT_SECONDARY,children:p(s.event_date)})]}),s.location&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx("span",{className:"mr-2",children:"üìç"}),a.jsx("span",{className:e.TEXT_SECONDARY,children:s.location})]})]}),!r&&a.jsx("div",{className:`mt-4 pt-4 border-t ${e.BORDER}`,children:a.jsx("span",{className:"text-sm text-gray-500",children:"Acara telah selesai"})})]},s.id)})})]})})};export{D as default};
